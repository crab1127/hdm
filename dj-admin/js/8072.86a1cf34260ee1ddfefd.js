(self.webpackChunkxiaoniao=self.webpackChunkxiaoniao||[]).push([[8072,5405],{70113:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(24595),r=n(80346),i=n(15851),s=n(92238),l=n(34846),c=n(16255),o=n.n(c),u=n(81420),d=n(44842),f=i.forwardRef((function(e,t){var n,a=e.prefixCls,c=void 0===a?"rc-switch":a,f=e.className,h=e.checked,m=e.defaultChecked,g=e.disabled,v=e.loadingIcon,p=e.checkedChildren,b=e.unCheckedChildren,$=e.onClick,y=e.onChange,O=e.onKeyDown,E=(0,l.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),Z=(0,u.Z)(!1,{value:h,defaultValue:m}),S=(0,s.Z)(Z,2),k=S[0],C=S[1];function D(e,t){var n=k;return g||(C(n=e),null==y||y(n,t)),n}var M=o()(c,f,(n={},(0,r.Z)(n,"".concat(c,"-checked"),k),(0,r.Z)(n,"".concat(c,"-disabled"),g),n));return i.createElement("button",Object.assign({},E,{type:"button",role:"switch","aria-checked":k,disabled:g,className:M,ref:t,onKeyDown:function(e){e.which===d.Z.LEFT?D(!1,e):e.which===d.Z.RIGHT&&D(!0,e),null==O||O(e)},onClick:function(e){var t=D(!k,e);null==$||$(t,e)}}),v,i.createElement("span",{className:"".concat(c,"-inner")},k?p:b))}));f.displayName="Switch";const h=f;var m=n(89738),g=n(26420),v=n(42795),p=n(17979),b=n(83493),$=i.forwardRef((function(e,t){var n,s=e.prefixCls,l=e.size,c=e.loading,u=e.className,d=void 0===u?"":u,f=e.disabled,$=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["prefixCls","size","loading","className","disabled"]);(0,b.Z)("checked"in $||!("value"in $),"Switch","`value` is not a valid prop, do you mean `checked`?");var y=i.useContext(v.E_),O=y.getPrefixCls,E=y.direction,Z=i.useContext(p.Z),S=O("switch",s),k=i.createElement("div",{className:"".concat(S,"-handle")},c&&i.createElement(m.Z,{className:"".concat(S,"-loading-icon")})),C=o()((n={},(0,r.Z)(n,"".concat(S,"-small"),"small"===(l||Z)),(0,r.Z)(n,"".concat(S,"-loading"),c),(0,r.Z)(n,"".concat(S,"-rtl"),"rtl"===E),n),d);return i.createElement(g.Z,{insertExtraNode:!0},i.createElement(h,(0,a.Z)({},$,{prefixCls:S,className:C,disabled:f||c,ref:t,loadingIcon:k})))}));$.__ANT_SWITCH=!0,$.displayName="Switch";const y=$},22854:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(45154),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,"/** @format */\n.toolsBar {\n  background: #fff;\n  padding: 10px;\n}\n.toolsBar .toolsBar-content {\n  padding: 10px;\n  background: #f4f4f4;\n  margin-top: 5px;\n}\n",""]);const i=r},80900:function(e){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",a="hour",r="day",i="week",s="month",l="quarter",c="year",o="date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(e,t,n){var a=String(e);return!a||a.length>=t?e:""+Array(t+1-a.length).join(n)+e},m={s:h,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),a=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+h(a,2,"0")+":"+h(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var a=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(a,s),i=n-r<0,l=t.clone().add(a+(i?-1:1),s);return+(-(a+(n-r)/(i?r-l:l-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:s,y:c,w:i,d:r,D:o,h:a,m:n,s:t,ms:e,Q:l}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",v={};v[g]=f;var p=function(e){return e instanceof O},b=function(e,t,n){var a;if(!e)return g;if("string"==typeof e)v[e]&&(a=e),t&&(v[e]=t,a=e);else{var r=e.name;v[r]=e,a=r}return!n&&a&&(g=a),a||!n&&g},$=function(e,t){if(p(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new O(n)},y=m;y.l=b,y.i=p,y.w=function(e,t){return $(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var O=function(){function f(e){this.$L=b(e.locale,null,!0),this.parse(e)}var h=f.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(y.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var a=t.match(u);if(a){var r=a[2]-1||0,i=(a[7]||"0").substring(0,3);return n?new Date(Date.UTC(a[1],r,a[3]||1,a[4]||0,a[5]||0,a[6]||0,i)):new Date(a[1],r,a[3]||1,a[4]||0,a[5]||0,a[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return y},h.isValid=function(){return!("Invalid Date"===this.$d.toString())},h.isSame=function(e,t){var n=$(e);return this.startOf(t)<=n&&n<=this.endOf(t)},h.isAfter=function(e,t){return $(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<$(e)},h.$g=function(e,t,n){return y.u(e)?this[t]:this.set(n,e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,l){var u=this,d=!!y.u(l)||l,f=y.p(e),h=function(e,t){var n=y.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return d?n:n.endOf(r)},m=function(e,t){return y.w(u.toDate()[e].apply(u.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},g=this.$W,v=this.$M,p=this.$D,b="set"+(this.$u?"UTC":"");switch(f){case c:return d?h(1,0):h(31,11);case s:return d?h(1,v):h(0,v+1);case i:var $=this.$locale().weekStart||0,O=(g<$?g+7:g)-$;return h(d?p-O:p+(6-O),v);case r:case o:return m(b+"Hours",0);case a:return m(b+"Minutes",1);case n:return m(b+"Seconds",2);case t:return m(b+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(i,l){var u,d=y.p(i),f="set"+(this.$u?"UTC":""),h=(u={},u[r]=f+"Date",u[o]=f+"Date",u[s]=f+"Month",u[c]=f+"FullYear",u[a]=f+"Hours",u[n]=f+"Minutes",u[t]=f+"Seconds",u[e]=f+"Milliseconds",u)[d],m=d===r?this.$D+(l-this.$W):l;if(d===s||d===c){var g=this.clone().set(o,1);g.$d[h](m),g.init(),this.$d=g.set(o,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[y.p(e)]()},h.add=function(e,l){var o,u=this;e=Number(e);var d=y.p(l),f=function(t){var n=$(u);return y.w(n.date(n.date()+Math.round(t*e)),u)};if(d===s)return this.set(s,this.$M+e);if(d===c)return this.set(c,this.$y+e);if(d===r)return f(1);if(d===i)return f(7);var h=(o={},o[n]=6e4,o[a]=36e5,o[t]=1e3,o)[d]||1,m=this.$d.getTime()+e*h;return y.w(m,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",a=y.z(this),r=this.$locale(),i=this.$H,s=this.$m,l=this.$M,c=r.weekdays,o=r.months,u=function(e,a,r,i){return e&&(e[a]||e(t,n))||r[a].substr(0,i)},f=function(e){return y.s(i%12||12,e,"0")},h=r.meridiem||function(e,t,n){var a=e<12?"AM":"PM";return n?a.toLowerCase():a},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:y.s(l+1,2,"0"),MMM:u(r.monthsShort,l,o,3),MMMM:u(o,l),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:u(r.weekdaysMin,this.$W,c,2),ddd:u(r.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:y.s(i,2,"0"),h:f(1),hh:f(2),a:h(i,s,!0),A:h(i,s,!1),m:String(s),mm:y.s(s,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:a};return n.replace(d,(function(e,t){return t||m[e]||a.replace(":","")}))},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(e,o,u){var d,f=y.p(o),h=$(e),m=6e4*(h.utcOffset()-this.utcOffset()),g=this-h,v=y.m(this,h);return v=(d={},d[c]=v/12,d[s]=v,d[l]=v/3,d[i]=(g-m)/6048e5,d[r]=(g-m)/864e5,d[a]=g/36e5,d[n]=g/6e4,d[t]=g/1e3,d)[f]||g,u?v:y.a(v)},h.daysInMonth=function(){return this.endOf(s).$D},h.$locale=function(){return v[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),a=b(e,t,!0);return a&&(n.$L=a),n},h.clone=function(){return y.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},f}(),E=O.prototype;return $.prototype=E,[["$ms",e],["$s",t],["$m",n],["$H",a],["$W",r],["$M",s],["$y",c],["$D",o]].forEach((function(e){E[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),$.extend=function(e,t){return e.$i||(e(t,O,$),e.$i=!0),$},$.locale=b,$.isDayjs=p,$.unix=function(e){return $(1e3*e)},$.en=v[g],$.Ls=v,$.p={},$}()},4892:(e,t,n)=>{"use strict";var a=n(57574),r=n.n(a),i=n(22854),s=r()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var l=i.default.locals;e.hot.accept(22854,(t=>{i=n(22854),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(l,i.default.locals)?(l=i.default.locals,s(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),i.default.locals},21685:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(15851),r=n(53922);const i=e=>{const{permsList:t}=r.Z.useContainer();return t.includes(e.name)?a.createElement(a.Fragment,null," ",e.children," "):a.createElement(a.Fragment,null)}},381:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(15851);n(4892);const r=({visible:e,content:t,children:n})=>a.createElement("div",{className:"toolsBar"},a.createElement("div",{className:"flex flex_between"},n),a.createElement("div",{style:{display:e?"block":"none"},className:"toolsBar-content"},t));r.defaultProps={visible:!1};const i=r},25715:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(43865),r=n(58233),i=n(15851);const s=function(e,t){var n;const{form:s}=t,l=(0,a._T)(t,["form"]),c=(0,r.ZP)(e,Object.assign(Object.assign({},l),{paginated:!0,manual:!0})),{params:o,run:u,mutate:d}=c,f=o[2]||{},[h,m]=(0,i.useState)(f.type||"simple"),[g,v]=(0,i.useState)(f.allFormData||{}),p=(0,i.useCallback)((()=>{if(s.getFieldInstance){const e=s.getFieldsValue(),t={};return Object.keys(e).forEach((n=>{s.getFieldInstance&&!s.getFieldInstance(n)||(t[n]=e[n])})),t}return s.getFieldsValue(null,(()=>!0))}),[s]);(0,i.useEffect)((()=>{if(s.getFieldInstance){const e={};Object.keys(g).forEach((t=>{s.getFieldInstance&&!s.getFieldInstance(t)||(e[t]=g[t])})),s.setFieldsValue(e)}else s.setFieldsValue(g)}),[h]),(0,i.useEffect)((()=>{o.length>0?u(...o):t.manual||$()}),[]);const b=(0,i.useCallback)((()=>{const e=p();v(Object.assign(Object.assign({},g),e)),m("simple"===h?"advance":"simple")}),[h,g,p]),$=(0,i.useCallback)((e=>{(null==e?void 0:e.preventDefault)&&e.preventDefault(),setTimeout((()=>{const e=p();console.log(1111,e);const n=Object.assign(Object.assign({},g),e);v(n),u(Object.assign(Object.assign({},o[0]||{}),{pageSize:t.defaultPageSize||10,current:1}),e,{allFormData:n,type:h})}))}),[p,u,o,g,h]),y=(0,i.useCallback)((()=>{s.resetFields(),$()}),[s,$]);return Object.assign(Object.assign({},c),{search:{submit:$,type:h,changeType:b,reset:y},remove:e=>{d((t=>{const n=t.list.slice();return n.forEach(((t,a)=>{t.id===e&&n.splice(a,1)})),Object.assign(Object.assign({},t),{list:n})}))},add:e=>{d((t=>{const n=t.list.slice();return n.push(e),Object.assign(Object.assign({},t),{list:n})}))},update:(e,t)=>{d((n=>{const a=n.list.slice();return a.forEach(((n,r)=>{n.id===e&&(a[r]=Object.assign(Object.assign({},n),t))})),Object.assign(Object.assign({},n),{list:a})}))},dataSource:(null===(n=c.data)||void 0===n?void 0:n.list)||[]})}},5405:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var a=n(43865),r=n(15851),i=n(36949),s=n(53985),l=n(72390),c=n(83e3),o=n(88984),u=n(41915);const d={labelCol:{span:4},wrapperCol:{span:20}},f=e=>{var{data:t}=e,n=(0,a._T)(e,["data"]);const[f]=i.Z.useForm();return(0,r.useEffect)((()=>{n.visible&&setTimeout((()=>{t?f.setFieldsValue(Object.assign({},t)):(f.resetFields(),f.setFieldsValue({status:1,sort:1}))}))}),[n.visible]),r.createElement(s.Z,{title:(null==t?void 0:t.id)?"编辑":"添加",maskClosable:!1,visible:n.visible,onCancel:()=>n.onClose(),onOk:e=>{e.preventDefault(),f.validateFields().then((e=>(0,a.mG)(void 0,void 0,void 0,(function*(){var a;const r=Object.assign(Object.assign({},t),e);if(null==t?void 0:t.id)yield(0,u.CP)(t.id,e);else{const t=yield(0,u.qb)(e);r.id=t.data}n.onClose(),null===(a=n.onOk)||void 0===a||a.call(n,(null==t?void 0:t.id)?"update":"create",r)}))))}},r.createElement(i.Z,Object.assign({form:f},d),r.createElement(i.Z.Item,{label:"名称",name:"name",rules:[{required:!0}]},r.createElement(l.Z,null)),r.createElement(i.Z.Item,{label:"编码",name:"code",rules:[{required:!0}]},r.createElement(l.Z,null)),r.createElement(i.Z.Item,{label:"备注",name:"remark"},r.createElement(l.Z.TextArea,null)),r.createElement(i.Z.Item,{label:"状态",name:"status"},r.createElement(c.ZP.Group,null,r.createElement(c.ZP,{value:1},"启用"),r.createElement(c.ZP,{value:0},"禁用"))),r.createElement(i.Z.Item,{label:"排序",name:"sort"},r.createElement(o.Z,null))))};f.defaultProps={disabled:[]};const h=f},58072:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>O});var a=n(15851),r=n(73630),i=n(36949),s=n(53985),l=n(70113),c=n(72145),o=n(72390),u=n(21921),d=n(80471),f=n(25715),h=n(5405),m=n(381),g=n(41915),v=n(80900),p=n.n(v),b=n(57100),$=n(21685),y=n(74848);const O=()=>{const e=(0,r.$B)(),t=(0,b.kt)(!1),[n,v]=(0,a.useState)(),[O]=i.Z.useForm(),{tableProps:E,search:Z,refresh:S,update:k,add:C,remove:D}=(0,f.Z)(((e,t)=>(0,g.UI)(Object.assign(Object.assign({},e),t)).then((e=>({total:e.total,list:e.data})))),{defaultPageSize:20,form:O}),{submit:M}=Z||{},w=[{title:"id",dataIndex:"id"},{title:"名称",dataIndex:"name"},{title:"编码",dataIndex:"code"},{title:"备注",dataIndex:"remark"},{title:"状态",key:"status",render:(e,t)=>a.createElement(l.Z,{checked:!!t.status,onChange:e=>{(0,g.CP)(t.id,{status:e?1:0}),k(t.id,{status:e?1:0})}})},{title:"跟新时间",key:"update_time",render:e=>p()(e.update_time).format("YYYY-MM-DD hh:mm")},{title:"跟新人",dataIndex:"update_by"},{title:"操作",key:"action",render:e=>a.createElement("div",null,a.createElement($.Z,{name:y.g3.SYSTEM_POST_EDIT},a.createElement(c.Z,{onClick:()=>(v(e),void t.toggle()),type:"link"},"修改")),a.createElement($.Z,{name:y.g3.SYSTEM_POST_REMOVE},a.createElement(c.Z,{onClick:()=>{return t=e,void s.Z.confirm({title:"提示",content:"是否真的要删除？",onOk:()=>{(0,g.M8)(t.id),D(t.id)}});var t},type:"link"},"删除")))}];return a.createElement("div",null,a.createElement(m.Z,{visible:!1},a.createElement(i.Z,{form:O,layout:"inline"},a.createElement(i.Z.Item,{name:"name"},a.createElement(o.Z.Search,{placeholder:"名字",onSearch:M})),a.createElement(i.Z.Item,{name:"status"},a.createElement(u.Z,{placeholder:"岗位状态",style:{width:"140px"},allowClear:!0,onChange:M},a.createElement(u.Z.Option,{value:"0"},"暂停"),a.createElement(u.Z.Option,{value:"1"},"启用")))),a.createElement("div",null,a.createElement($.Z,{name:y.g3.SYSTEM_POST_ADD},a.createElement(c.Z,{type:"primary",onClick:()=>{v(void 0),t.toggle()}},"新增")),"  ",a.createElement(c.Z,{onClick:S},"刷新"))),a.createElement(d.Z,Object.assign({columns:w,rowKey:"id"},E)),a.createElement(h.default,{id:parseInt(e.params.id),visible:t.state,data:n,onClose:t.setFalse,onOk:(e,t)=>{console.log(t),"update"===e?k(t.id,t):C(t)}}))}}}]);