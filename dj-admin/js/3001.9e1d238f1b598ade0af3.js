(self.webpackChunkxiaoniao=self.webpackChunkxiaoniao||[]).push([[3001,6605],{25192:(e,t,n)=>{"use strict";n.d(t,{u:()=>f,Z:()=>m});var i=n(24595),a=n(80346),r=n(92238),s=n(15851),l=n(16255),o=n.n(l),c=n(39444),u=n(42795);function d(e){var t=e.className,n=e.direction,r=e.index,l=e.marginDirection,o=e.children,c=e.split,u=e.wrap,d=s.useContext(f),h=d.horizontalSize,m=d.verticalSize,p=d.latestIndex,v={};return"vertical"===n?r<p&&(v={marginBottom:h/(c?2:1)}):v=(0,i.Z)((0,i.Z)({},r<p&&(0,a.Z)({},l,h/(c?2:1))),u&&{paddingBottom:m}),null==o?null:s.createElement(s.Fragment,null,s.createElement("div",{className:t,style:v},o),r<p&&c&&s.createElement("span",{className:"".concat(t,"-split"),style:v},c))}var f=s.createContext({latestIndex:0,horizontalSize:0,verticalSize:0}),h={small:8,middle:16,large:24};const m=function(e){var t,n=s.useContext(u.E_),l=n.getPrefixCls,m=n.space,p=n.direction,v=e.size,g=void 0===v?(null==m?void 0:m.size)||"small":v,y=e.align,$=e.className,b=e.children,O=e.direction,E=void 0===O?"horizontal":O,Z=e.prefixCls,S=e.split,D=e.style,M=e.wrap,w=void 0!==M&&M,j=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),k=s.useMemo((function(){return(Array.isArray(g)?g:[g,g]).map((function(e){return function(e){return"string"==typeof e?h[e]:e||0}(e)}))}),[g]),x=(0,r.Z)(k,2),C=x[0],I=x[1],_=(0,c.Z)(b,{keepEmpty:!0});if(0===_.length)return null;var F=void 0===y&&"horizontal"===E?"center":y,z=l("space",Z),T=o()(z,"".concat(z,"-").concat(E),(t={},(0,a.Z)(t,"".concat(z,"-rtl"),"rtl"===p),(0,a.Z)(t,"".concat(z,"-align-").concat(F),F),t),$),Y="".concat(z,"-item"),H="rtl"===p?"marginLeft":"marginRight",N=0,P=_.map((function(e,t){return null!=e&&(N=t),s.createElement(d,{className:Y,key:"".concat(Y,"-").concat(t),direction:E,index:t,marginDirection:H,split:S,wrap:w},e)}));return s.createElement("div",(0,i.Z)({className:T,style:(0,i.Z)((0,i.Z)({},w&&{flexWrap:"wrap",marginBottom:-I}),D)},j),s.createElement(f.Provider,{value:{horizontalSize:C,verticalSize:I,latestIndex:N}},P))}},22854:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(45154),a=n.n(i)()((function(e){return e[1]}));a.push([e.id,"/** @format */\n.toolsBar {\n  background: #fff;\n  padding: 10px;\n}\n.toolsBar .toolsBar-content {\n  padding: 10px;\n  background: #f4f4f4;\n  margin-top: 5px;\n}\n",""]);const r=a},80900:function(e){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",i="hour",a="day",r="week",s="month",l="quarter",o="year",c="date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},m={s:h,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),a=n%60;return(t<=0?"+":"-")+h(i,2,"0")+":"+h(a,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var i=12*(n.year()-t.year())+(n.month()-t.month()),a=t.clone().add(i,s),r=n-a<0,l=t.clone().add(i+(r?-1:1),s);return+(-(i+(n-a)/(r?a-l:l-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:s,y:o,w:r,d:a,D:c,h:i,m:n,s:t,ms:e,Q:l}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},p="en",v={};v[p]=f;var g=function(e){return e instanceof O},y=function(e,t,n){var i;if(!e)return p;if("string"==typeof e)v[e]&&(i=e),t&&(v[e]=t,i=e);else{var a=e.name;v[a]=e,i=a}return!n&&i&&(p=i),i||!n&&p},$=function(e,t){if(g(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new O(n)},b=m;b.l=y,b.i=g,b.w=function(e,t){return $(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var O=function(){function f(e){this.$L=y(e.locale,null,!0),this.parse(e)}var h=f.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(u);if(i){var a=i[2]-1||0,r=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)):new Date(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return b},h.isValid=function(){return!("Invalid Date"===this.$d.toString())},h.isSame=function(e,t){var n=$(e);return this.startOf(t)<=n&&n<=this.endOf(t)},h.isAfter=function(e,t){return $(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<$(e)},h.$g=function(e,t,n){return b.u(e)?this[t]:this.set(n,e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,l){var u=this,d=!!b.u(l)||l,f=b.p(e),h=function(e,t){var n=b.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return d?n:n.endOf(a)},m=function(e,t){return b.w(u.toDate()[e].apply(u.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},p=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(f){case o:return d?h(1,0):h(31,11);case s:return d?h(1,v):h(0,v+1);case r:var $=this.$locale().weekStart||0,O=(p<$?p+7:p)-$;return h(d?g-O:g+(6-O),v);case a:case c:return m(y+"Hours",0);case i:return m(y+"Minutes",1);case n:return m(y+"Seconds",2);case t:return m(y+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(r,l){var u,d=b.p(r),f="set"+(this.$u?"UTC":""),h=(u={},u[a]=f+"Date",u[c]=f+"Date",u[s]=f+"Month",u[o]=f+"FullYear",u[i]=f+"Hours",u[n]=f+"Minutes",u[t]=f+"Seconds",u[e]=f+"Milliseconds",u)[d],m=d===a?this.$D+(l-this.$W):l;if(d===s||d===o){var p=this.clone().set(c,1);p.$d[h](m),p.init(),this.$d=p.set(c,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[b.p(e)]()},h.add=function(e,l){var c,u=this;e=Number(e);var d=b.p(l),f=function(t){var n=$(u);return b.w(n.date(n.date()+Math.round(t*e)),u)};if(d===s)return this.set(s,this.$M+e);if(d===o)return this.set(o,this.$y+e);if(d===a)return f(1);if(d===r)return f(7);var h=(c={},c[n]=6e4,c[i]=36e5,c[t]=1e3,c)[d]||1,m=this.$d.getTime()+e*h;return b.w(m,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=b.z(this),a=this.$locale(),r=this.$H,s=this.$m,l=this.$M,o=a.weekdays,c=a.months,u=function(e,i,a,r){return e&&(e[i]||e(t,n))||a[i].substr(0,r)},f=function(e){return b.s(r%12||12,e,"0")},h=a.meridiem||function(e,t,n){var i=e<12?"AM":"PM";return n?i.toLowerCase():i},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:b.s(l+1,2,"0"),MMM:u(a.monthsShort,l,c,3),MMMM:u(c,l),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:u(a.weekdaysMin,this.$W,o,2),ddd:u(a.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(r),HH:b.s(r,2,"0"),h:f(1),hh:f(2),a:h(r,s,!0),A:h(r,s,!1),m:String(s),mm:b.s(s,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:i};return n.replace(d,(function(e,t){return t||m[e]||i.replace(":","")}))},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(e,c,u){var d,f=b.p(c),h=$(e),m=6e4*(h.utcOffset()-this.utcOffset()),p=this-h,v=b.m(this,h);return v=(d={},d[o]=v/12,d[s]=v,d[l]=v/3,d[r]=(p-m)/6048e5,d[a]=(p-m)/864e5,d[i]=p/36e5,d[n]=p/6e4,d[t]=p/1e3,d)[f]||p,u?v:b.a(v)},h.daysInMonth=function(){return this.endOf(s).$D},h.$locale=function(){return v[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),i=y(e,t,!0);return i&&(n.$L=i),n},h.clone=function(){return b.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},f}(),E=O.prototype;return $.prototype=E,[["$ms",e],["$s",t],["$m",n],["$H",i],["$W",a],["$M",s],["$y",o],["$D",c]].forEach((function(e){E[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),$.extend=function(e,t){return e.$i||(e(t,O,$),e.$i=!0),$},$.locale=y,$.isDayjs=g,$.unix=function(e){return $(1e3*e)},$.en=v[p],$.Ls=v,$.p={},$}()},4892:(e,t,n)=>{"use strict";var i=n(57574),a=n.n(i),r=n(22854),s=a()(r.default,{insert:"head",singleton:!1});if(!r.default.locals||e.hot.invalidate){var l=r.default.locals;e.hot.accept(22854,(t=>{r=n(22854),function(e,t,n){if(!e&&t||e&&!t)return!1;var i;for(i in e)if(e[i]!==t[i])return!1;for(i in t)if(!e[i])return!1;return!0}(l,r.default.locals)?(l=r.default.locals,s(r.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),r.default.locals},381:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(15851);n(4892);const a=({visible:e,content:t,children:n})=>i.createElement("div",{className:"toolsBar"},i.createElement("div",{className:"flex flex_between"},n),i.createElement("div",{style:{display:e?"block":"none"},className:"toolsBar-content"},t));a.defaultProps={visible:!1};const r=a},25715:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(43865),a=n(58233),r=n(15851);const s=function(e,t){var n;const{form:s}=t,l=(0,i._T)(t,["form"]),o=(0,a.ZP)(e,Object.assign(Object.assign({},l),{paginated:!0,manual:!0})),{params:c,run:u,mutate:d}=o,f=c[2]||{},[h,m]=(0,r.useState)(f.type||"simple"),[p,v]=(0,r.useState)(f.allFormData||{}),g=(0,r.useCallback)((()=>{if(s.getFieldInstance){const e=s.getFieldsValue(),t={};return Object.keys(e).forEach((n=>{s.getFieldInstance&&!s.getFieldInstance(n)||(t[n]=e[n])})),t}return s.getFieldsValue(null,(()=>!0))}),[s]);(0,r.useEffect)((()=>{if(s.getFieldInstance){const e={};Object.keys(p).forEach((t=>{s.getFieldInstance&&!s.getFieldInstance(t)||(e[t]=p[t])})),s.setFieldsValue(e)}else s.setFieldsValue(p)}),[h]),(0,r.useEffect)((()=>{c.length>0?u(...c):t.manual||$()}),[]);const y=(0,r.useCallback)((()=>{const e=g();v(Object.assign(Object.assign({},p),e)),m("simple"===h?"advance":"simple")}),[h,p,g]),$=(0,r.useCallback)((e=>{(null==e?void 0:e.preventDefault)&&e.preventDefault(),setTimeout((()=>{const e=g();console.log(1111,e);const n=Object.assign(Object.assign({},p),e);v(n),u(Object.assign(Object.assign({},c[0]||{}),{pageSize:t.defaultPageSize||10,current:1}),e,{allFormData:n,type:h})}))}),[g,u,c,p,h]),b=(0,r.useCallback)((()=>{s.resetFields(),$()}),[s,$]);return Object.assign(Object.assign({},o),{search:{submit:$,type:h,changeType:y,reset:b},remove:e=>{d((t=>{const n=t.list.slice();return n.forEach(((t,i)=>{t.id===e&&n.splice(i,1)})),Object.assign(Object.assign({},t),{list:n})}))},add:e=>{d((t=>{const n=t.list.slice();return n.push(e),Object.assign(Object.assign({},t),{list:n})}))},update:(e,t)=>{d((n=>{const i=n.list.slice();return i.forEach(((n,a)=>{n.id===e&&(i[a]=Object.assign(Object.assign({},n),t))})),Object.assign(Object.assign({},n),{list:i})}))},dataSource:(null===(n=o.data)||void 0===n?void 0:n.list)||[]})}},56605:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var i=n(43865),a=n(15851),r=n(36949),s=n(53985),l=n(49222),o=n(72390),c=n(83e3),u=n(88984),d=n(41915),f=n(57100),h=n(79096);const m={labelCol:{span:4},wrapperCol:{span:20}},p=e=>{var{data:t}=e,n=(0,i._T)(e,["data"]);const[p]=r.Z.useForm(),{data:v}=(0,f.QT)((()=>(0,d.p8)({cache:1}).then((e=>(0,h.a2)(e.data.map((e=>({pid:e.pid,title:e.title,value:e.id}))),0,{id:"value",pid:"pid",children:"children"})))));return(0,a.useEffect)((()=>{n.visible&&setTimeout((()=>{t?p.setFieldsValue(Object.assign({},t)):(p.resetFields(),p.setFieldsValue({status:1,sort:1}))}))}),[n.visible]),a.createElement(s.Z,{title:(null==t?void 0:t.id)?"编辑":"添加",maskClosable:!1,visible:n.visible,onCancel:()=>n.onClose(),onOk:e=>{e.preventDefault(),p.validateFields().then((e=>(0,i.mG)(void 0,void 0,void 0,(function*(){var i;const a=Object.assign(Object.assign({},t),e);(null==t?void 0:t.id)?yield(0,d.Tg)(t.id,e):yield(0,d.EY)(Object.assign({},e)),n.onClose(),null===(i=n.onOk)||void 0===i||i.call(n,(null==t?void 0:t.id)?"update":"create",a)}))))}},a.createElement(r.Z,Object.assign({form:p},m),a.createElement(r.Z.Item,{label:"上级",name:"pid"},a.createElement(l.Z,{style:{width:"100%"},allowClear:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:v,placeholder:"请选择父级,不选默认最顶层"})),a.createElement(r.Z.Item,{label:"名称",name:"title",rules:[{required:!0}]},a.createElement(o.Z,null)),a.createElement(r.Z.Item,{label:"状态",name:"status"},a.createElement(c.ZP.Group,null,a.createElement(c.ZP,{value:1},"启用"),a.createElement(c.ZP,{value:0},"禁用"))),a.createElement(r.Z.Item,{label:"排序",name:"sort"},a.createElement(u.Z,null))))}},33001:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>$});var i=n(15851),a=n(36949),r=n(72145),s=n(72390),l=n(21921),o=n(25192),c=n(80471),u=n(25715),d=n(56605),f=n(381),h=n(41915),m=n(80900),p=n.n(m),v=n(57100),g=n(79096);const y=(e,t)=>(0,h.p8)(Object.assign(Object.assign({},e),t)).then((e=>({total:e.total,list:(0,g.a2)(e.data,0,{id:"id",pid:"pid",children:"children"})}))),$=e=>{const[t,n]=(0,i.useState)(),[h]=a.Z.useForm(),m=(0,v.kt)(!1),{tableProps:g,search:$,refresh:b}=(0,u.Z)(y,{defaultPageSize:20,form:h}),{submit:O}=$||{},E=[{title:"id",dataIndex:"id"},{title:"标题",dataIndex:"title"},{title:"创建时间",key:"create_time",render:e=>i.createElement("span",null," ",p()(e.create_time).format("YYYY-MM-DD HH:mm"))},{title:"创建人",dataIndex:"created_by"},{title:"操作",key:"action",render:e=>i.createElement("div",null,i.createElement(r.Z,{onClick:()=>(n(e),void m.setTrue()),type:"link"},"修改"))}];return i.createElement("div",null,i.createElement(f.Z,{visible:!1},i.createElement(a.Z,{form:h,layout:"inline"},i.createElement(a.Z.Item,{name:"singlepage_id"},i.createElement(s.Z,{placeholder:"id"})),i.createElement(a.Z.Item,{name:"title"},i.createElement(s.Z,{placeholder:"标题"})),i.createElement(a.Z.Item,{name:"status"},i.createElement(l.Z,{placeholder:"状态",style:{width:"140px"},allowClear:!0},i.createElement(l.Z.Option,{value:"0"},"暂停"),i.createElement(l.Z.Option,{value:"1"},"启用"))),i.createElement(a.Z.Item,{name:"status"},i.createElement(r.Z,{onClick:O},"搜索"))),i.createElement(o.Z,null,i.createElement(r.Z,{type:"primary",onClick:()=>{n(void 0),m.setTrue()}},"添加"),i.createElement(r.Z,{onClick:b},"刷新"))),i.createElement("div",{style:{background:"#fff"}},i.createElement(c.Z,Object.assign({columns:E,rowKey:"id"},g))),i.createElement(d.default,{visible:m.state,data:t,onClose:m.setFalse,onOk:b}))}}}]);