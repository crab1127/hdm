(self.webpackChunkxiaoniao=self.webpackChunkxiaoniao||[]).push([[4776],{97482:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var l=a(15851),n=a(27736),i=a(80337),r=a(89738),s=a(62342),o=a(79096);function c(e){const t="image/jpeg"===e.type||"image/png"===e.type;t||n.ZP.error("You can only upload JPG/PNG file!");const a=e.size/1024/1024<2;return a||n.ZP.error("Image must smaller than 2MB!"),t&&a}const u=e=>{const[t,a]=(0,l.useState)(!1),[n,u]=(0,l.useState)("");(0,l.useEffect)((()=>{u(e.value?(0,o.Pk)(e.value):"")}),[e.value]);const d=l.createElement("div",null,t?l.createElement(r.Z,null):l.createElement(s.Z,null),l.createElement("div",{className:"ant-upload-text"},"Upload"));return l.createElement(i.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"https://api.harsonserver.com/clerk/common/qnUploadFile.json?platform=36",beforeUpload:c,onChange:t=>{var l;"uploading"!==t.file.status?"done"===t.file.status&&(null===(l=e.onChange)||void 0===l||l.call(e,t.fileList[0].response.data.replace("https://","")),function(e,t){const l=new FileReader;l.addEventListener("load",(()=>(e=>{a(!1),u(e)})(l.result))),l.readAsDataURL(e)}(t.file.originFileObj)):a(!0)}},n?l.createElement("img",{src:n,alt:"avatar",style:{width:"100%"}}):d)}},24776:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var l=a(43865),n=a(15851),i=a(36949),r=a(53985),s=a(21921),o=a(72390),c=a(88984),u=a(83e3),d=a(41915),m=a(57100),v=a(97482);const p={labelCol:{span:4},wrapperCol:{span:20}},E=e=>{var{data:t}=e,a=(0,l._T)(e,["data"]);const[E]=i.Z.useForm(),{data:b}=(0,m.QT)((()=>(0,d.zP)("activity_cover").then((e=>e.data))));return(0,n.useEffect)((()=>{a.visible&&setTimeout((()=>{t?E.setFieldsValue(Object.assign(Object.assign({},t),{category:[t.category_id+"",t.category_two_id+""]})):E.resetFields()}))}),[a.visible]),n.createElement(r.Z,{title:(null==t?void 0:t.activity_tempalte_id)?"编辑":"添加",maskClosable:!1,width:700,visible:a.visible,onCancel:()=>{var e;null===(e=a.onClose)||void 0===e||e.call(a)},onOk:e=>{e.preventDefault(),E.validateFields().then((e=>(0,l.mG)(void 0,void 0,void 0,(function*(){var l,n;e.category_id=1*e.category_id;const i=Object.assign(Object.assign({},t),e);(null==t?void 0:t.activity_tempalte_id)?yield(0,d.qt)(t.activity_tempalte_id,e):yield(0,d.k)(e),null===(l=a.onClose)||void 0===l||l.call(a),null===(n=a.onOk)||void 0===n||n.call(a,(null==t?void 0:t.activity_tempalte_id)?"update":"create",i)}))))}},a.visible&&n.createElement(i.Z,Object.assign({form:E},p),n.createElement(i.Z.Item,{label:"分类",name:"category_id",rules:[{required:!0}]},n.createElement(s.Z,null,null==b?void 0:b.map((e=>n.createElement(s.Z.Option,{value:e.value},e.label))))),n.createElement(i.Z.Item,{label:"模板名称",name:"name",rules:[{required:!0}]},n.createElement(o.Z,null)),n.createElement(i.Z.Item,{label:"封面",name:"photo",rules:[{required:!0}]},n.createElement(v.Z,null)),n.createElement(i.Z.Item,{label:"排序",name:"sort"},n.createElement(c.Z,{min:1,max:1e5})),n.createElement(i.Z.Item,{label:"状态",name:"status"},n.createElement(u.ZP.Group,null,n.createElement(u.ZP,{value:1},"启用"),n.createElement(u.ZP,{value:0},"禁用")))))}}}]);