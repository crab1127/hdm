(self.webpackChunkxiaoniao=self.webpackChunkxiaoniao||[]).push([[8725,7979,1581],{24207:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n(23277).Z},17367:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n(66947).Z},70113:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var a=n(24595),i=n(80346),s=n(15851),r=n(92238),l=n(34846),c=n(16255),o=n.n(c),u=n(81420),d=n(44842),f=s.forwardRef((function(e,t){var n,a=e.prefixCls,c=void 0===a?"rc-switch":a,f=e.className,m=e.checked,h=e.defaultChecked,p=e.disabled,g=e.loadingIcon,v=e.checkedChildren,b=e.unCheckedChildren,y=e.onClick,Z=e.onChange,$=e.onKeyDown,E=(0,l.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),O=(0,u.Z)(!1,{value:m,defaultValue:h}),w=(0,r.Z)(O,2),k=w[0],S=w[1];function D(e,t){var n=k;return p||(S(n=e),null==Z||Z(n,t)),n}var C=o()(c,f,(n={},(0,i.Z)(n,"".concat(c,"-checked"),k),(0,i.Z)(n,"".concat(c,"-disabled"),p),n));return s.createElement("button",Object.assign({},E,{type:"button",role:"switch","aria-checked":k,disabled:p,className:C,ref:t,onKeyDown:function(e){e.which===d.Z.LEFT?D(!1,e):e.which===d.Z.RIGHT&&D(!0,e),null==$||$(e)},onClick:function(e){var t=D(!k,e);null==y||y(t,e)}}),g,s.createElement("span",{className:"".concat(c,"-inner")},k?v:b))}));f.displayName="Switch";const m=f;var h=n(89738),p=n(26420),g=n(42795),v=n(17979),b=n(83493),y=s.forwardRef((function(e,t){var n,r=e.prefixCls,l=e.size,c=e.loading,u=e.className,d=void 0===u?"":u,f=e.disabled,y=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["prefixCls","size","loading","className","disabled"]);(0,b.Z)("checked"in y||!("value"in y),"Switch","`value` is not a valid prop, do you mean `checked`?");var Z=s.useContext(g.E_),$=Z.getPrefixCls,E=Z.direction,O=s.useContext(v.Z),w=$("switch",r),k=s.createElement("div",{className:"".concat(w,"-handle")},c&&s.createElement(h.Z,{className:"".concat(w,"-loading-icon")})),S=o()((n={},(0,i.Z)(n,"".concat(w,"-small"),"small"===(l||O)),(0,i.Z)(n,"".concat(w,"-loading"),c),(0,i.Z)(n,"".concat(w,"-rtl"),"rtl"===E),n),d);return s.createElement(p.Z,{insertExtraNode:!0},s.createElement(m,(0,a.Z)({},y,{prefixCls:w,className:S,disabled:f||c,ref:t,loadingIcon:k})))}));y.__ANT_SWITCH=!0,y.displayName="Switch";const Z=y},22854:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(45154),i=n.n(a)()((function(e){return e[1]}));i.push([e.id,"/** @format */\n.toolsBar {\n  background: #fff;\n  padding: 10px;\n}\n.toolsBar .toolsBar-content {\n  padding: 10px;\n  background: #f4f4f4;\n  margin-top: 5px;\n}\n",""]);const s=i},80900:function(e){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",a="hour",i="day",s="week",r="month",l="quarter",c="year",o="date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(e,t,n){var a=String(e);return!a||a.length>=t?e:""+Array(t+1-a.length).join(n)+e},h={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),a=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+m(a,2,"0")+":"+m(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var a=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(a,r),s=n-i<0,l=t.clone().add(a+(s?-1:1),r);return+(-(a+(n-i)/(s?i-l:l-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:r,y:c,w:s,d:i,D:o,h:a,m:n,s:t,ms:e,Q:l}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},p="en",g={};g[p]=f;var v=function(e){return e instanceof $},b=function(e,t,n){var a;if(!e)return p;if("string"==typeof e)g[e]&&(a=e),t&&(g[e]=t,a=e);else{var i=e.name;g[i]=e,a=i}return!n&&a&&(p=a),a||!n&&p},y=function(e,t){if(v(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new $(n)},Z=h;Z.l=b,Z.i=v,Z.w=function(e,t){return y(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var $=function(){function f(e){this.$L=b(e.locale,null,!0),this.parse(e)}var m=f.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(Z.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var a=t.match(u);if(a){var i=a[2]-1||0,s=(a[7]||"0").substring(0,3);return n?new Date(Date.UTC(a[1],i,a[3]||1,a[4]||0,a[5]||0,a[6]||0,s)):new Date(a[1],i,a[3]||1,a[4]||0,a[5]||0,a[6]||0,s)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return Z},m.isValid=function(){return!("Invalid Date"===this.$d.toString())},m.isSame=function(e,t){var n=y(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return y(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<y(e)},m.$g=function(e,t,n){return Z.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,l){var u=this,d=!!Z.u(l)||l,f=Z.p(e),m=function(e,t){var n=Z.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return d?n:n.endOf(i)},h=function(e,t){return Z.w(u.toDate()[e].apply(u.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},p=this.$W,g=this.$M,v=this.$D,b="set"+(this.$u?"UTC":"");switch(f){case c:return d?m(1,0):m(31,11);case r:return d?m(1,g):m(0,g+1);case s:var y=this.$locale().weekStart||0,$=(p<y?p+7:p)-y;return m(d?v-$:v+(6-$),g);case i:case o:return h(b+"Hours",0);case a:return h(b+"Minutes",1);case n:return h(b+"Seconds",2);case t:return h(b+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(s,l){var u,d=Z.p(s),f="set"+(this.$u?"UTC":""),m=(u={},u[i]=f+"Date",u[o]=f+"Date",u[r]=f+"Month",u[c]=f+"FullYear",u[a]=f+"Hours",u[n]=f+"Minutes",u[t]=f+"Seconds",u[e]=f+"Milliseconds",u)[d],h=d===i?this.$D+(l-this.$W):l;if(d===r||d===c){var p=this.clone().set(o,1);p.$d[m](h),p.init(),this.$d=p.set(o,Math.min(this.$D,p.daysInMonth())).$d}else m&&this.$d[m](h);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[Z.p(e)]()},m.add=function(e,l){var o,u=this;e=Number(e);var d=Z.p(l),f=function(t){var n=y(u);return Z.w(n.date(n.date()+Math.round(t*e)),u)};if(d===r)return this.set(r,this.$M+e);if(d===c)return this.set(c,this.$y+e);if(d===i)return f(1);if(d===s)return f(7);var m=(o={},o[n]=6e4,o[a]=36e5,o[t]=1e3,o)[d]||1,h=this.$d.getTime()+e*m;return Z.w(h,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",a=Z.z(this),i=this.$locale(),s=this.$H,r=this.$m,l=this.$M,c=i.weekdays,o=i.months,u=function(e,a,i,s){return e&&(e[a]||e(t,n))||i[a].substr(0,s)},f=function(e){return Z.s(s%12||12,e,"0")},m=i.meridiem||function(e,t,n){var a=e<12?"AM":"PM";return n?a.toLowerCase():a},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:Z.s(l+1,2,"0"),MMM:u(i.monthsShort,l,o,3),MMMM:u(o,l),D:this.$D,DD:Z.s(this.$D,2,"0"),d:String(this.$W),dd:u(i.weekdaysMin,this.$W,c,2),ddd:u(i.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(s),HH:Z.s(s,2,"0"),h:f(1),hh:f(2),a:m(s,r,!0),A:m(s,r,!1),m:String(r),mm:Z.s(r,2,"0"),s:String(this.$s),ss:Z.s(this.$s,2,"0"),SSS:Z.s(this.$ms,3,"0"),Z:a};return n.replace(d,(function(e,t){return t||h[e]||a.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(e,o,u){var d,f=Z.p(o),m=y(e),h=6e4*(m.utcOffset()-this.utcOffset()),p=this-m,g=Z.m(this,m);return g=(d={},d[c]=g/12,d[r]=g,d[l]=g/3,d[s]=(p-h)/6048e5,d[i]=(p-h)/864e5,d[a]=p/36e5,d[n]=p/6e4,d[t]=p/1e3,d)[f]||p,u?g:Z.a(g)},m.daysInMonth=function(){return this.endOf(r).$D},m.$locale=function(){return g[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),a=b(e,t,!0);return a&&(n.$L=a),n},m.clone=function(){return Z.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},f}(),E=$.prototype;return y.prototype=E,[["$ms",e],["$s",t],["$m",n],["$H",a],["$W",i],["$M",r],["$y",c],["$D",o]].forEach((function(e){E[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),y.extend=function(e,t){return e.$i||(e(t,$,y),e.$i=!0),y},y.locale=b,y.isDayjs=v,y.unix=function(e){return y(1e3*e)},y.en=g[p],y.Ls=g,y.p={},y}()},4892:(e,t,n)=>{"use strict";var a=n(57574),i=n.n(a),s=n(22854),r=i()(s.default,{insert:"head",singleton:!1});if(!s.default.locals||e.hot.invalidate){var l=s.default.locals;e.hot.accept(22854,(t=>{s=n(22854),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(l,s.default.locals)?(l=s.default.locals,r(s.default)):e.hot.invalidate()}))}e.hot.dispose((function(){r()})),s.default.locals},381:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(15851);n(4892);const i=({visible:e,content:t,children:n})=>a.createElement("div",{className:"toolsBar"},a.createElement("div",{className:"flex flex_between"},n),a.createElement("div",{style:{display:e?"block":"none"},className:"toolsBar-content"},t));i.defaultProps={visible:!1};const s=i},25715:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(43865),i=n(58233),s=n(15851);const r=function(e,t){var n;const{form:r}=t,l=(0,a._T)(t,["form"]),c=(0,i.ZP)(e,Object.assign(Object.assign({},l),{paginated:!0,manual:!0})),{params:o,run:u,mutate:d}=c,f=o[2]||{},[m,h]=(0,s.useState)(f.type||"simple"),[p,g]=(0,s.useState)(f.allFormData||{}),v=(0,s.useCallback)((()=>{if(r.getFieldInstance){const e=r.getFieldsValue(),t={};return Object.keys(e).forEach((n=>{r.getFieldInstance&&!r.getFieldInstance(n)||(t[n]=e[n])})),t}return r.getFieldsValue(null,(()=>!0))}),[r]);(0,s.useEffect)((()=>{if(r.getFieldInstance){const e={};Object.keys(p).forEach((t=>{r.getFieldInstance&&!r.getFieldInstance(t)||(e[t]=p[t])})),r.setFieldsValue(e)}else r.setFieldsValue(p)}),[m]),(0,s.useEffect)((()=>{o.length>0?u(...o):t.manual||y()}),[]);const b=(0,s.useCallback)((()=>{const e=v();g(Object.assign(Object.assign({},p),e)),h("simple"===m?"advance":"simple")}),[m,p,v]),y=(0,s.useCallback)((e=>{(null==e?void 0:e.preventDefault)&&e.preventDefault(),setTimeout((()=>{const e=v();console.log(1111,e);const n=Object.assign(Object.assign({},p),e);g(n),u(Object.assign(Object.assign({},o[0]||{}),{pageSize:t.defaultPageSize||10,current:1}),e,{allFormData:n,type:m})}))}),[v,u,o,p,m]),Z=(0,s.useCallback)((()=>{r.resetFields(),y()}),[r,y]);return Object.assign(Object.assign({},c),{search:{submit:y,type:m,changeType:b,reset:Z},remove:e=>{d((t=>{const n=t.list.slice();return n.forEach(((t,a)=>{t.id===e&&n.splice(a,1)})),Object.assign(Object.assign({},t),{list:n})}))},add:e=>{d((t=>{const n=t.list.slice();return n.push(e),Object.assign(Object.assign({},t),{list:n})}))},update:(e,t)=>{d((n=>{const a=n.list.slice();return a.forEach(((n,i)=>{n.id===e&&(a[i]=Object.assign(Object.assign({},n),t))})),Object.assign(Object.assign({},n),{list:a})}))},dataSource:(null===(n=c.data)||void 0===n?void 0:n.list)||[]})}},81082:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var a=n(43865),i=n(15851),s=n(36949),r=n(53985),l=n(49222),c=n(17367),o=n(24207),u=n(72390),d=n(83e3),f=n(88984),m=n(41915);const h={labelCol:{span:4},wrapperCol:{span:20}},p={labelCol:{span:8},wrapperCol:{span:16}},g=e=>{var{data:t}=e,n=(0,a._T)(e,["data"]);const[g,v]=(0,i.useState)(null==t?void 0:t.type),[b]=s.Z.useForm();return(0,i.useEffect)((()=>{n.visible&&setTimeout((()=>{t?b.setFieldsValue(Object.assign(Object.assign({},t),{parent_id:(null==t?void 0:t.parent_id)||n.parentId})):(b.resetFields(),b.setFieldsValue({status:1,sort:1,type:1,exact:1,hidden:0}))}))}),[n.visible]),i.createElement(r.Z,{title:"编辑租户菜单",width:"800px",maskClosable:!1,visible:n.visible,onCancel:()=>{n.setVisible(!1)},onOk:e=>{e.preventDefault(),b.validateFields().then((e=>(0,a.mG)(void 0,void 0,void 0,(function*(){const a=Object.assign({},e);if(null==t?void 0:t.id)yield(0,m.N0)(t.id,e),a.id=t.id,n.onUpdate&&n.onUpdate(a.id,a);else{const t=yield(0,m.QS)(e);a.id=t.data,a.create_time=new Date,n.onAdd&&n.onAdd(a)}n.setVisible(!1),n.onOk&&n.onOk(a)}))))}},n.visible&&i.createElement(s.Z,Object.assign({},h,{form:b}),i.createElement(s.Z.Item,{label:"上级菜单",name:"parent_id"},i.createElement(l.Z,{style:{width:"100%"},allowClear:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:n.menuList,placeholder:"请选择父级,不选默认最顶层"})),i.createElement(c.Z,null,i.createElement(o.Z,{span:12},i.createElement(s.Z.Item,Object.assign({},p,{label:"菜单名称",name:"title",rules:[{required:!0,message:"请填写菜单名称"}]}),i.createElement(u.Z,null))),i.createElement(o.Z,{span:12},i.createElement(s.Z.Item,Object.assign({},p,{label:"类型",name:"type",rules:[{required:!0,message:"请填写类型"}]}),i.createElement(d.ZP.Group,{onChange:e=>v(e.target.value)},i.createElement(d.ZP,{value:1},"菜单"),i.createElement(d.ZP,{value:2},"按钮"))))),i.createElement(s.Z.Item,{label:"权限标识",name:"perms",rules:[{required:!0,message:"请填写权限标识"}]},i.createElement(u.Z,null)),1===g&&i.createElement(i.Fragment,null,i.createElement(s.Z.Item,{label:"组件路劲",name:"component"},i.createElement(u.Z,null)),i.createElement(c.Z,null,i.createElement(o.Z,{span:12},i.createElement(s.Z.Item,Object.assign({label:"路由地址"},p,{name:"path"}),i.createElement(u.Z,null))),i.createElement(o.Z,{span:12},i.createElement(s.Z.Item,Object.assign({},p,{label:"启用",name:"exact",rules:[{required:!0,message:"请输入status"}]}),i.createElement(d.ZP.Group,null,i.createElement(d.ZP,{value:0},"模糊匹配"),i.createElement(d.ZP,{value:1},"完全匹配")))),i.createElement(o.Z,{span:12},i.createElement(s.Z.Item,Object.assign({},p,{label:"启用",name:"status",rules:[{required:!0,message:"请输入status"}]}),i.createElement(d.ZP.Group,null,i.createElement(d.ZP,{value:0},"禁用"),i.createElement(d.ZP,{value:1},"启用")))),i.createElement(o.Z,{span:12},i.createElement(s.Z.Item,Object.assign({},p,{label:"侧栏显示",name:"hidden"}),i.createElement(d.ZP.Group,null,i.createElement(d.ZP,{value:0},"显示"),i.createElement(d.ZP,{value:1},"不显示")))),i.createElement(o.Z,{span:12},i.createElement(s.Z.Item,Object.assign({},p,{label:"排序",name:"sort"}),i.createElement(f.Z,{min:1,max:1e4}))))),i.createElement(s.Z.Item,{label:"备注",name:"remark"},i.createElement(u.Z.TextArea,null))))};g.defaultProps={parentId:0};const v=g},98725:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var a=n(43865),i=n(15851),s=n(36949),r=n(70113),l=n(72145),c=n(80471),o=n(25715),u=n(81082),d=n(381),f=n(71581),m=n(41915),h=n(80900),p=n.n(h);const g=e=>{const[t,n]=(0,i.useState)(!1),[h,g]=(0,i.useState)(),[v,b]=(0,i.useState)([]),[y,Z]=(0,i.useState)(0),[$]=s.Z.useForm();(0,i.useEffect)((()=>{(0,f.getMenuTree)().then((e=>{console.log(111,e),b(e)}))}),[]);const{tableProps:E,refresh:O,add:w,update:k}=(0,o.Z)(f.getTableData,{defaultPageSize:20,form:$}),S=(e=0)=>{Z(e),g(void 0),n(!0)},D=[{title:"菜单名称",dataIndex:"title",width:300},{title:"排序",dataIndex:"sort",width:50},{title:"权限标识",dataIndex:"perms",width:200},{title:"组件路径",dataIndex:"component"},{title:"可见",key:"visible",width:150,render:e=>i.createElement(r.Z,{defaultChecked:!!e.status,onChange:t=>((e,t)=>{(0,m.N0)(t.id,{status:e?1:0})})(t,e)})},{title:"创建时间",key:"create_time",width:150,render:e=>i.createElement("span",null," ",p()(e.create_time).format("YYYY-MM-DD"))},{title:"操作",key:"action",width:250,render:e=>i.createElement("div",null,i.createElement(l.Z,{onClick:()=>(g(e),void n(!0)),type:"link"},"修改"),i.createElement(l.Z,{onClick:()=>S(e.id),type:"link"},"新增"),i.createElement(l.Z,{onClick:()=>(e=>(0,a.mG)(void 0,void 0,void 0,(function*(){yield(0,m.mi)(e.id),O()})))(e),type:"link"},"删除"))}];return i.createElement("div",null,i.createElement(d.Z,null,i.createElement(s.Z,{form:$,layout:"inline",style:{display:"flex",paddingTop:"10px"}}),i.createElement("div",null,i.createElement(l.Z,{type:"primary",onClick:()=>S()},"新增"),"  ",i.createElement(l.Z,{onClick:O},"刷新"))),i.createElement("div",{style:{background:"#fff"}},i.createElement(c.Z,Object.assign({size:"small",columns:D,rowKey:"id"},E))),i.createElement(u.default,{parentId:y,visible:t,data:h,menuList:v,setVisible:n,onAdd:w,onUpdate:k}))}},71581:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getTableData:()=>s,getMenuTree:()=>r});var a=n(41915),i=n(79096);const s=(e,t)=>(0,a.WR)(Object.assign(Object.assign({},e),t)).then((e=>({total:0,list:(0,i.a2)(e.data,0,{id:"id",pid:"parent_id",children:"children"})}))),r=()=>(0,a.WR)({}).then((e=>{const t=e.data.map((e=>({title:e.title,value:e.id,key:e.id,pid:e.parent_id})));return(0,i.a2)(t,0,{id:"value",pid:"pid",children:"children"})}))}}]);