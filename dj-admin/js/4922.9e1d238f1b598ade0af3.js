(self.webpackChunkxiaoniao=self.webpackChunkxiaoniao||[]).push([[4922],{22854:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(45154),n=s.n(a)()((function(e){return e[1]}));n.push([e.id,"/** @format */\n.toolsBar {\n  background: #fff;\n  padding: 10px;\n}\n.toolsBar .toolsBar-content {\n  padding: 10px;\n  background: #f4f4f4;\n  margin-top: 5px;\n}\n",""]);const l=n},24624:(e,t,s)=>{var a={"./af":3715,"./af.js":3715,"./ar":23830,"./ar-dz":94919,"./ar-dz.js":94919,"./ar-kw":65049,"./ar-kw.js":65049,"./ar-ly":64900,"./ar-ly.js":64900,"./ar-ma":43203,"./ar-ma.js":43203,"./ar-sa":27679,"./ar-sa.js":27679,"./ar-tn":66593,"./ar-tn.js":66593,"./ar.js":23830,"./az":4459,"./az.js":4459,"./be":79261,"./be.js":79261,"./bg":29531,"./bg.js":29531,"./bm":3845,"./bm.js":3845,"./bn":84544,"./bn-bd":56090,"./bn-bd.js":56090,"./bn.js":84544,"./bo":30311,"./bo.js":30311,"./br":18336,"./br.js":18336,"./bs":67842,"./bs.js":67842,"./ca":35179,"./ca.js":35179,"./cs":25392,"./cs.js":25392,"./cv":71119,"./cv.js":71119,"./cy":86529,"./cy.js":86529,"./da":54752,"./da.js":54752,"./de":29383,"./de-at":3234,"./de-at.js":3234,"./de-ch":78235,"./de-ch.js":78235,"./de.js":29383,"./dv":27034,"./dv.js":27034,"./el":73982,"./el.js":73982,"./en-au":94142,"./en-au.js":94142,"./en-ca":25524,"./en-ca.js":25524,"./en-gb":81274,"./en-gb.js":81274,"./en-ie":16098,"./en-ie.js":16098,"./en-il":69251,"./en-il.js":69251,"./en-in":31165,"./en-in.js":31165,"./en-nz":23983,"./en-nz.js":23983,"./en-sg":95831,"./en-sg.js":95831,"./eo":94704,"./eo.js":94704,"./es":62487,"./es-do":98195,"./es-do.js":98195,"./es-mx":29703,"./es-mx.js":29703,"./es-us":9063,"./es-us.js":9063,"./es.js":62487,"./et":16811,"./et.js":16811,"./eu":34484,"./eu.js":34484,"./fa":62743,"./fa.js":62743,"./fi":33303,"./fi.js":33303,"./fil":88286,"./fil.js":88286,"./fo":92948,"./fo.js":92948,"./fr":29281,"./fr-ca":87720,"./fr-ca.js":87720,"./fr-ch":48106,"./fr-ch.js":48106,"./fr.js":29281,"./fy":42180,"./fy.js":42180,"./ga":9461,"./ga.js":9461,"./gd":33544,"./gd.js":33544,"./gl":73790,"./gl.js":73790,"./gom-deva":40656,"./gom-deva.js":40656,"./gom-latn":26677,"./gom-latn.js":26677,"./gu":53665,"./gu.js":53665,"./he":74653,"./he.js":74653,"./hi":16837,"./hi.js":16837,"./hr":32887,"./hr.js":32887,"./hu":99720,"./hu.js":99720,"./hy-am":67120,"./hy-am.js":67120,"./id":64981,"./id.js":64981,"./is":7593,"./is.js":7593,"./it":27658,"./it-ch":48275,"./it-ch.js":48275,"./it.js":27658,"./ja":42454,"./ja.js":42454,"./jv":99623,"./jv.js":99623,"./ka":79296,"./ka.js":79296,"./kk":16924,"./kk.js":16924,"./km":39971,"./km.js":39971,"./kn":46182,"./kn.js":46182,"./ko":34880,"./ko.js":34880,"./ku":75995,"./ku.js":75995,"./ky":38446,"./ky.js":38446,"./lb":22187,"./lb.js":22187,"./lo":96700,"./lo.js":96700,"./lt":68574,"./lt.js":68574,"./lv":79883,"./lv.js":79883,"./me":85212,"./me.js":85212,"./mi":52119,"./mi.js":52119,"./mk":79357,"./mk.js":79357,"./ml":7180,"./ml.js":7180,"./mn":74703,"./mn.js":74703,"./mr":13488,"./mr.js":13488,"./ms":75283,"./ms-my":44596,"./ms-my.js":44596,"./ms.js":75283,"./mt":72403,"./mt.js":72403,"./my":87867,"./my.js":87867,"./nb":48081,"./nb.js":48081,"./ne":19083,"./ne.js":19083,"./nl":88808,"./nl-be":40725,"./nl-be.js":40725,"./nl.js":88808,"./nn":22274,"./nn.js":22274,"./oc-lnc":42279,"./oc-lnc.js":42279,"./pa-in":39576,"./pa-in.js":39576,"./pl":5159,"./pl.js":5159,"./pt":49323,"./pt-br":80657,"./pt-br.js":80657,"./pt.js":49323,"./ro":99972,"./ro.js":99972,"./ru":7773,"./ru.js":7773,"./sd":37335,"./sd.js":37335,"./se":54249,"./se.js":54249,"./si":43744,"./si.js":43744,"./sk":79144,"./sk.js":79144,"./sl":52045,"./sl.js":52045,"./sq":59148,"./sq.js":59148,"./sr":94346,"./sr-cyrl":97601,"./sr-cyrl.js":97601,"./sr.js":94346,"./ss":91266,"./ss.js":91266,"./sv":53358,"./sv.js":53358,"./sw":30673,"./sw.js":30673,"./ta":4396,"./ta.js":4396,"./te":32549,"./te.js":32549,"./tet":90654,"./tet.js":90654,"./tg":574,"./tg.js":574,"./th":15319,"./th.js":15319,"./tk":87043,"./tk.js":87043,"./tl-ph":30197,"./tl-ph.js":30197,"./tlh":56937,"./tlh.js":56937,"./tr":11164,"./tr.js":11164,"./tzl":99527,"./tzl.js":99527,"./tzm":98825,"./tzm-latn":49245,"./tzm-latn.js":49245,"./tzm.js":98825,"./ug-cn":39417,"./ug-cn.js":39417,"./uk":53306,"./uk.js":53306,"./ur":23656,"./ur.js":23656,"./uz":47872,"./uz-latn":55661,"./uz-latn.js":55661,"./uz.js":47872,"./vi":9660,"./vi.js":9660,"./x-pseudo":43661,"./x-pseudo.js":43661,"./yo":66469,"./yo.js":66469,"./zh-cn":67665,"./zh-cn.js":67665,"./zh-hk":72782,"./zh-hk.js":72782,"./zh-mo":89302,"./zh-mo.js":89302,"./zh-tw":71291,"./zh-tw.js":71291};function n(e){var t=l(e);return s(t)}function l(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=l,e.exports=n,n.id=24624},4892:(e,t,s)=>{"use strict";var a=s(57574),n=s.n(a),l=s(22854),i=n()(l.default,{insert:"head",singleton:!1});if(!l.default.locals||e.hot.invalidate){var r=l.default.locals;e.hot.accept(22854,(t=>{l=s(22854),function(e,t,s){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(r,l.default.locals)?(r=l.default.locals,i(l.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),l.default.locals},21685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(15851),n=s(53922);const l=e=>{const{permsList:t}=n.Z.useContainer();return t.includes(e.name)?a.createElement(a.Fragment,null," ",e.children," "):a.createElement(a.Fragment,null)}},381:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(15851);s(4892);const n=({visible:e,content:t,children:s})=>a.createElement("div",{className:"toolsBar"},a.createElement("div",{className:"flex flex_between"},s),a.createElement("div",{style:{display:e?"block":"none"},className:"toolsBar-content"},t));n.defaultProps={visible:!1};const l=n},3626:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(15851),n=s(89772);const{TreeNode:l}=n.Z,i=e=>{const[t,s]=(0,a.useState)([]);(0,a.useEffect)((()=>{s(e.selectedKeys.map((e=>e+"")))}),[e.selectedKeys]);const i=e=>e.map((e=>e.children?a.createElement(l,{title:e.title,key:e.id,active:!0},i(e.children)):a.createElement(l,{key:e.id,title:e.title,active:!0})));return a.createElement(n.Z,{checkable:!0,autoExpandParent:!0,onCheck:t=>{var a;s(t),null===(a=e.onCheck)||void 0===a||a.call(e,t.map((e=>parseInt(e))))},checkedKeys:t},i(e.treeData))};i.defaultProps={treeData:[],selectedKeys:[]};const r=i},25715:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(43865),n=s(58233),l=s(15851);const i=function(e,t){var s;const{form:i}=t,r=(0,a._T)(t,["form"]),c=(0,n.ZP)(e,Object.assign(Object.assign({},r),{paginated:!0,manual:!0})),{params:o,run:d,mutate:u}=c,j=o[2]||{},[m,b]=(0,l.useState)(j.type||"simple"),[f,v]=(0,l.useState)(j.allFormData||{}),g=(0,l.useCallback)((()=>{if(i.getFieldInstance){const e=i.getFieldsValue(),t={};return Object.keys(e).forEach((s=>{i.getFieldInstance&&!i.getFieldInstance(s)||(t[s]=e[s])})),t}return i.getFieldsValue(null,(()=>!0))}),[i]);(0,l.useEffect)((()=>{if(i.getFieldInstance){const e={};Object.keys(f).forEach((t=>{i.getFieldInstance&&!i.getFieldInstance(t)||(e[t]=f[t])})),i.setFieldsValue(e)}else i.setFieldsValue(f)}),[m]),(0,l.useEffect)((()=>{o.length>0?d(...o):t.manual||p()}),[]);const h=(0,l.useCallback)((()=>{const e=g();v(Object.assign(Object.assign({},f),e)),b("simple"===m?"advance":"simple")}),[m,f,g]),p=(0,l.useCallback)((e=>{(null==e?void 0:e.preventDefault)&&e.preventDefault(),setTimeout((()=>{const e=g();console.log(1111,e);const s=Object.assign(Object.assign({},f),e);v(s),d(Object.assign(Object.assign({},o[0]||{}),{pageSize:t.defaultPageSize||10,current:1}),e,{allFormData:s,type:m})}))}),[g,d,o,f,m]),k=(0,l.useCallback)((()=>{i.resetFields(),p()}),[i,p]);return Object.assign(Object.assign({},c),{search:{submit:p,type:m,changeType:h,reset:k},remove:e=>{u((t=>{const s=t.list.slice();return s.forEach(((t,a)=>{t.id===e&&s.splice(a,1)})),Object.assign(Object.assign({},t),{list:s})}))},add:e=>{u((t=>{const s=t.list.slice();return s.push(e),Object.assign(Object.assign({},t),{list:s})}))},update:(e,t)=>{u((s=>{const a=s.list.slice();return a.forEach(((s,n)=>{s.id===e&&(a[n]=Object.assign(Object.assign({},s),t))})),Object.assign(Object.assign({},s),{list:a})}))},dataSource:(null===(s=c.data)||void 0===s?void 0:s.list)||[]})}},56502:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(43865),n=s(15851),l=s(36949),i=s(53985),r=s(72390),c=s(34951),o=s(83e3),d=s(41915),u=s(28950),j=s.n(u);const m={labelCol:{span:4},wrapperCol:{span:20}},b=e=>{var{data:t}=e,s=(0,a._T)(e,["data"]);const[u]=l.Z.useForm();return(0,n.useEffect)((()=>{s.visible&&u.setFieldsValue(Object.assign(Object.assign({},t),{end_time:j()(null==t?void 0:t.end_time,"YYYY/MM/DD")}))}),[s.visible]),n.createElement(i.Z,{title:(null==t?void 0:t.id)?"编辑分类":"添加分类",maskClosable:!1,visible:s.visible,onCancel:()=>{s.setVisible(!1)},onOk:e=>{e.preventDefault(),u.validateFields().then((e=>(0,a.mG)(void 0,void 0,void 0,(function*(){const a=Object.assign({},e);(null==t?void 0:t.id)&&(yield(0,d.ZK)(t.id,e),a.id=t.id,s.onUpdate&&s.onUpdate(a.id,a)),s.setVisible(!1),s.onOk&&s.onOk(a)}))))}},s.visible&&n.createElement(l.Z,Object.assign({form:u},m),n.createElement(l.Z.Item,{label:"公司名",name:"name"},n.createElement("span",null,null==t?void 0:t.name)),n.createElement(l.Z.Item,{label:"联系人",name:"contact",rules:[{required:!0,message:"请填写数量"}]},n.createElement(r.Z,null)),n.createElement(l.Z.Item,{label:"联系电话",name:"mobile",rules:[{required:!0,message:"请填写数量"}]},n.createElement(r.Z,null)),n.createElement(l.Z.Item,{label:"成员数量",name:"user_qty",rules:[{required:!0,message:"请填写数量"}]},n.createElement(r.Z,null)),n.createElement(l.Z.Item,{label:"结束日期",name:"end_time",rules:[{required:!0,message:"请填写数量"}]},n.createElement(c.Z,{format:"YYYY/MM/DD"})),n.createElement(l.Z.Item,{label:"状态",name:"status"},n.createElement(o.ZP.Group,null,n.createElement(o.ZP,{value:1},"启用"),n.createElement(o.ZP,{value:0},"禁用")))))}},40850:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(15851),n=s(53985),l=s(3626),i=s(41915),r=s(79096);const c=e=>{const[t,s]=(0,a.useState)([]),[c,o]=(0,a.useState)([]);return(0,a.useEffect)((()=>{(0,i.WR)().then((e=>{const t=(0,r.a2)(e.data,0,{id:"id",pid:"parent_id",children:"children"});o(t)}))}),[]),(0,a.useEffect)((()=>{e.id&&e.visible&&(0,i.nv)(e.id).then((e=>{s(e.data)}))}),[e.id,e.visible]),a.createElement(n.Z,{title:"编辑权限",maskClosable:!1,visible:e.visible,onCancel:()=>e.setVisible(!1),onOk:s=>{(0,i.AT)(e.id,{menu_ids:t}).then((t=>{e.setVisible(!1)}))}},a.createElement(l.Z,{treeData:c,selectedKeys:t,onCheck:e=>{s(e)}}))};c.defaultProps={visible:!1};const o=c},42834:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(15851),n=s(36949),l=s(72145),i=s(72390),r=s(21921),c=s(80471),o=s(25715),d=s(56502),u=s(381),j=s(40850),m=s(41915),b=s(80900),f=s.n(b),v=s(74848),g=s(21685);const h=(e,t)=>(0,m.fY)(Object.assign(Object.assign({},e),t)).then((e=>({total:e.total,list:e.data}))),p=e=>{const[t,s]=(0,a.useState)(!1),[m,b]=(0,a.useState)(!1),[p,k]=(0,a.useState)(),[E]=n.Z.useForm(),{tableProps:y,search:Z,refresh:O,update:z}=(0,o.Z)(h,{defaultPageSize:20,form:E}),{submit:C}=Z||{},I=e=>{k(e),s(!0)},x=[{title:"住户id",dataIndex:"id"},{title:"租户名称",dataIndex:"name"},{title:"用户id",dataIndex:"contacts"},{title:"联系人",dataIndex:"contact"},{title:"电话",dataIndex:"mobile"},{title:"成员数量",dataIndex:"user_qty"},{title:"开始时间",key:"start_time",render:e=>a.createElement("span",null," ",f()(e.start_time).format("YYYY-MM-DD HH"))},{title:"结束时间",key:"end_time",render:e=>a.createElement("span",null," ",f()(e.end_time).format("YYYY-MM-DD HH"))},{title:"备注",dataIndex:"remark"},{title:"操作",key:"action",render:e=>a.createElement("div",null,a.createElement(g.Z,{name:v.g3.TENANT_COMPANY_EDIT},a.createElement(l.Z,{onClick:()=>I(e),type:"link"},"修改")),a.createElement(g.Z,{name:v.g3.TENANT_COMPANY_EDIT},a.createElement(l.Z,{onClick:()=>(k(e),void b(!0)),type:"link"},"权限")),a.createElement(l.Z,{onClick:()=>I(e),type:"link"},"充值记录"))}];return a.createElement("div",null,a.createElement(u.Z,{visible:!1},a.createElement(n.Z,{form:E,layout:"inline"},a.createElement(n.Z.Item,{name:"name"},a.createElement(i.Z.Search,{placeholder:"名字",onSearch:C})),a.createElement(n.Z.Item,{name:"status"},a.createElement(r.Z,{placeholder:"用户状态",style:{width:"140px"},allowClear:!0,onChange:C},a.createElement(r.Z.Option,{value:"0"},"暂停"),a.createElement(r.Z.Option,{value:"1"},"启用")))),a.createElement(l.Z,{onClick:O},"刷新")),a.createElement("div",{style:{background:"#fff"}},a.createElement(c.Z,Object.assign({columns:x,rowKey:"id"},y))),a.createElement(d.default,{visible:t,data:p,setVisible:s,onUpdate:z}),a.createElement(j.default,{visible:m,id:null==p?void 0:p.id,setVisible:b}))}}}]);