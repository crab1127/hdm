(self.webpackChunkxiaoniao=self.webpackChunkxiaoniao||[]).push([[309],{22854:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var l=a(45154),n=a.n(l)()((function(e){return e[1]}));n.push([e.id,"/** @format */\n.toolsBar {\n  background: #fff;\n  padding: 10px;\n}\n.toolsBar .toolsBar-content {\n  padding: 10px;\n  background: #f4f4f4;\n  margin-top: 5px;\n}\n",""]);const s=n},4892:(e,t,a)=>{"use strict";var l=a(57574),n=a.n(l),s=a(22854),i=n()(s.default,{insert:"head",singleton:!1});if(!s.default.locals||e.hot.invalidate){var r=s.default.locals;e.hot.accept(22854,(t=>{s=a(22854),function(e,t,a){if(!e&&t||e&&!t)return!1;var l;for(l in e)if(e[l]!==t[l])return!1;for(l in t)if(!e[l])return!1;return!0}(r,s.default.locals)?(r=s.default.locals,i(s.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),s.default.locals},381:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var l=a(15851);a(4892);const n=({visible:e,content:t,children:a})=>l.createElement("div",{className:"toolsBar"},l.createElement("div",{className:"flex flex_between"},a),l.createElement("div",{style:{display:e?"block":"none"},className:"toolsBar-content"},t));n.defaultProps={visible:!1};const s=n},25715:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var l=a(43865),n=a(58233),s=a(15851);const i=function(e,t){var a;const{form:i}=t,r=(0,l._T)(t,["form"]),c=(0,n.ZP)(e,Object.assign(Object.assign({},r),{paginated:!0,manual:!0})),{params:d,run:o,mutate:u}=c,m=d[2]||{},[b,g]=(0,s.useState)(m.type||"simple"),[f,p]=(0,s.useState)(m.allFormData||{}),v=(0,s.useCallback)((()=>{if(i.getFieldInstance){const e=i.getFieldsValue(),t={};return Object.keys(e).forEach((a=>{i.getFieldInstance&&!i.getFieldInstance(a)||(t[a]=e[a])})),t}return i.getFieldsValue(null,(()=>!0))}),[i]);(0,s.useEffect)((()=>{if(i.getFieldInstance){const e={};Object.keys(f).forEach((t=>{i.getFieldInstance&&!i.getFieldInstance(t)||(e[t]=f[t])})),i.setFieldsValue(e)}else i.setFieldsValue(f)}),[b]),(0,s.useEffect)((()=>{d.length>0?o(...d):t.manual||h()}),[]);const E=(0,s.useCallback)((()=>{const e=v();p(Object.assign(Object.assign({},f),e)),g("simple"===b?"advance":"simple")}),[b,f,v]),h=(0,s.useCallback)((e=>{(null==e?void 0:e.preventDefault)&&e.preventDefault(),setTimeout((()=>{const e=v();console.log(1111,e);const a=Object.assign(Object.assign({},f),e);p(a),o(Object.assign(Object.assign({},d[0]||{}),{pageSize:t.defaultPageSize||10,current:1}),e,{allFormData:a,type:b})}))}),[v,o,d,f,b]),Z=(0,s.useCallback)((()=>{i.resetFields(),h()}),[i,h]);return Object.assign(Object.assign({},c),{search:{submit:h,type:b,changeType:E,reset:Z},remove:e=>{u((t=>{const a=t.list.slice();return a.forEach(((t,l)=>{t.id===e&&a.splice(l,1)})),Object.assign(Object.assign({},t),{list:a})}))},add:e=>{u((t=>{const a=t.list.slice();return a.push(e),Object.assign(Object.assign({},t),{list:a})}))},update:(e,t)=>{u((a=>{const l=a.list.slice();return l.forEach(((a,n)=>{a.id===e&&(l[n]=Object.assign(Object.assign({},a),t))})),Object.assign(Object.assign({},a),{list:l})}))},dataSource:(null===(a=c.data)||void 0===a?void 0:a.list)||[]})}},66418:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var l=a(43865),n=a(15851),s=a(36949),i=a(53985),r=a(72390),c=a(21921),d=a(49222),o=a(83e3),u=a(41915),m=a(57100),b=a(79096);const g={labelCol:{span:4},wrapperCol:{span:20}},f=e=>{var t,{data:a}=e,f=(0,l._T)(e,["data"]);const[p]=s.Z.useForm(),v=(0,m.QT)((()=>(0,u.UI)({cache:1}).then((e=>e.data)))),E=(0,m.QT)((()=>(0,u.ms)({cache:1}).then((e=>(0,b.a2)(e.data.map((e=>({pid:e.pid,title:e.name,value:e.id}))),0,{id:"value",pid:"pid",children:"children"})))));return(0,n.useEffect)((()=>{f.visible&&setTimeout((()=>{a?p.setFieldsValue(Object.assign({},a)):(p.resetFields(),p.setFieldsValue({status:1,sort:1}))}))}),[f.visible]),n.createElement(i.Z,{title:"审核",maskClosable:!1,visible:f.visible,okText:"审核通过",onCancel:()=>f.onClose(),onOk:e=>{e.preventDefault(),p.validateFields().then((e=>(0,l.mG)(void 0,void 0,void 0,(function*(){var t;const l=Object.assign(Object.assign({},a),e);(null==a?void 0:a.id)?yield(0,u.Nq)(a.id,Object.assign(Object.assign({},e),{usable:1})):yield(0,u.r4)(e),f.onClose(),null===(t=f.onOk)||void 0===t||t.call(f,(null==a?void 0:a.id)?"update":"create",l)}))))}},n.createElement(s.Z,Object.assign({form:p},g),n.createElement(s.Z.Item,{label:"名称",name:"name",rules:[{required:!0}]},n.createElement(r.Z,{maxLength:10})),n.createElement(s.Z.Item,{label:"微信昵称",name:"nickName",rules:[{required:!0}]},n.createElement(r.Z,{maxLength:10,disabled:!0})),n.createElement(s.Z.Item,{label:"电话",name:"mobile",rules:[{required:!0}]},n.createElement(r.Z,{maxLength:11,disabled:!0})),n.createElement(s.Z.Item,{label:"编码",name:"code",rules:[{required:!0}]},n.createElement(r.Z,{maxLength:8})),n.createElement(s.Z.Item,{label:"岗位",name:"post_id"},n.createElement(c.Z,null,null===(t=v.data)||void 0===t?void 0:t.map((e=>n.createElement(c.Z.Option,{key:e.id,value:e.id},e.name))))),n.createElement(s.Z.Item,{label:"部门",name:"org_id"},n.createElement(d.Z,{style:{width:"100%"},allowClear:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:E.data,placeholder:"请选择部门"})),n.createElement(s.Z.Item,{label:"性别",name:"gender"},n.createElement(o.ZP.Group,null,n.createElement(o.ZP,{value:0},"男"),n.createElement(o.ZP,{value:1},"女")))))};f.defaultProps={disabled:[]};const p=f},90309:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Z});var l=a(15851),n=a(73630),s=a(36949),i=a(53985),r=a(49293),c=a(25192),d=a(72145),o=a(72390),u=a(80471),m=a(25715),b=a(66418),g=a(381),f=a(41915),p=a(80900),v=a.n(p),E=a(57100),h=a(79096);const Z=()=>{const e=(0,n.$B)(),t=(0,E.kt)(!1),[a,p]=(0,l.useState)(),[Z]=s.Z.useForm(),{tableProps:O,search:k,refresh:j,update:y,add:I,remove:F}=(0,m.Z)(((e,t)=>(0,f.lE)(Object.assign(Object.assign(Object.assign({},e),t),{usable:0})).then((e=>({total:e.total,list:e.data})))),{defaultPageSize:20,form:Z}),{submit:x}=k||{},C=[{title:"员工号",dataIndex:"code"},{title:"头像",key:"avatarUrl",render:(e,t)=>l.createElement(r.C,{src:(0,h.Pk)(t.avatarUrl),alt:t.name},t.name)},{title:"用户名",dataIndex:"name"},{title:"微信昵称",dataIndex:"nickName"},{title:"手机号码",dataIndex:"mobile"},{title:"性别",key:"gender",render:(e,t)=>0===t.gender?"男":1===t.gender?"女":"未知"},{title:"跟新时间",key:"update_time",render:e=>v()(e.update_time).format("YYYY-MM-DD hh:mm")},{title:"跟新人",dataIndex:"update_by"},{title:"操作",key:"action",render:e=>l.createElement(c.Z,null,l.createElement(d.Z,{onClick:()=>(p(e),void t.toggle()),type:"link"},"审核"),l.createElement(d.Z,{onClick:()=>{return t=e,void i.Z.confirm({title:"提示",content:"是否真的要删除？",onOk:()=>{(0,f.kX)(t.id),F(t.id)}});var t},type:"link"},"删除"))}];return l.createElement("div",null,l.createElement(g.Z,{visible:!1},l.createElement(s.Z,{form:Z,layout:"inline"},l.createElement(s.Z.Item,{name:"name"},l.createElement(o.Z.Search,{placeholder:"名字",onSearch:x})),l.createElement(s.Z.Item,{name:"mobile"},l.createElement(o.Z.Search,{placeholder:"手机号",onSearch:x}))),l.createElement(c.Z,null,l.createElement(d.Z,{onClick:j},"刷新"))),l.createElement(u.Z,Object.assign({columns:C,rowKey:"id"},O)),l.createElement(b.default,{id:parseInt(e.params.id),visible:t.state,data:a,onClose:t.setFalse,onOk:(e,t)=>{console.log(t),j(),"update"===e?y(t.id,t):I(t)}}))}}}]);