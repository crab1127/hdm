(self.webpackChunkxiaoniao=self.webpackChunkxiaoniao||[]).push([[1598,9527,652],{83e3:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>j});var a=n(80346),l=n(24595),o=n(15851),r=n(93861),c=n(16255),s=n.n(c),i=n(32871),u=n(42795),d=o.createContext(null),p=d.Provider;const f=d;var m=n(83493),v=function(e,t){var n,c=o.useContext(f),d=o.useContext(u.E_),p=d.getPrefixCls,v=d.direction,b=o.useRef(),g=(0,i.sQ)(t,b);o.useEffect((function(){(0,m.Z)(!("optionType"in e),"Radio","`optionType` is only support in Radio.Group.")}),[]);var y=e.prefixCls,h=e.className,E=e.children,C=e.style,Z=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n}(e,["prefixCls","className","children","style"]),k=p("radio",y),O=(0,l.Z)({},Z);c&&(O.name=c.name,O.onChange=function(t){e.onChange&&e.onChange(t),(null==c?void 0:c.onChange)&&c.onChange(t)},O.checked=e.value===c.value,O.disabled=e.disabled||c.disabled);var x=s()("".concat(k,"-wrapper"),(n={},(0,a.Z)(n,"".concat(k,"-wrapper-checked"),O.checked),(0,a.Z)(n,"".concat(k,"-wrapper-disabled"),O.disabled),(0,a.Z)(n,"".concat(k,"-wrapper-rtl"),"rtl"===v),n),h);return o.createElement("label",{className:x,style:C,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},o.createElement(r.Z,(0,l.Z)({},O,{prefixCls:k,ref:g})),void 0!==E?o.createElement("span",null,E):null)},b=o.forwardRef(v);b.displayName="Radio",b.defaultProps={type:"radio"};const g=b;var y=n(92238),h=n(81420),E=n(17979),C=o.forwardRef((function(e,t){var n=o.useContext(u.E_),l=n.getPrefixCls,r=n.direction,c=o.useContext(E.Z),i=(0,h.Z)(e.defaultValue,{value:e.value}),d=(0,y.Z)(i,2),f=d[0],m=d[1];return o.createElement(p,{value:{onChange:function(t){var n=f,a=t.target.value;"value"in e||m(a);var l=e.onChange;l&&a!==n&&l(t)},value:f,disabled:e.disabled,name:e.name}},function(){var n,i=e.prefixCls,u=e.className,d=void 0===u?"":u,p=e.options,m=e.optionType,v=e.buttonStyle,b=void 0===v?"outline":v,y=e.disabled,h=e.children,E=e.size,C=e.style,Z=e.id,k=e.onMouseEnter,O=e.onMouseLeave,x=l("radio",i),j="".concat(x,"-group"),P=h;if(p&&p.length>0){var S="button"===m?"".concat(x,"-button"):x;P=p.map((function(e){return"string"==typeof e?o.createElement(g,{key:e,prefixCls:S,disabled:y,value:e,checked:f===e},e):o.createElement(g,{key:"radio-group-value-options-".concat(e.value),prefixCls:S,disabled:e.disabled||y,value:e.value,checked:f===e.value,style:e.style},e.label)}))}var w=E||c,N=s()(j,"".concat(j,"-").concat(b),(n={},(0,a.Z)(n,"".concat(j,"-").concat(w),w),(0,a.Z)(n,"".concat(j,"-rtl"),"rtl"===r),n),d);return o.createElement("div",{className:N,style:C,onMouseEnter:k,onMouseLeave:O,id:Z,ref:t},P)}())}));const Z=o.memo(C);var k=function(e,t){var n=o.useContext(f),a=o.useContext(u.E_).getPrefixCls,r=e.prefixCls,c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n}(e,["prefixCls"]),s=a("radio-button",r);return n&&(c.checked=e.value===n.value,c.disabled=e.disabled||n.disabled),o.createElement(g,(0,l.Z)({prefixCls:s},c,{type:"radio",ref:t}))};const O=o.forwardRef(k);var x=g;x.Button=O,x.Group=Z;const j=x},9504:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(80346),l=n(24595),o=n(92238),r=n(15851),c=n(16255),s=n.n(c),i=n(26663),u=n(62641),d=n(42795);var p=n(89083),f=n(26420),m=new RegExp("^(".concat(p.Y.join("|"),")(-inverse)?$")),v=new RegExp("^(".concat(p.E.join("|"),")$")),b=function(e,t){var n,c=e.prefixCls,p=e.className,b=e.style,g=e.children,y=e.icon,h=e.color,E=e.onClose,C=e.closeIcon,Z=e.closable,k=void 0!==Z&&Z,O=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n}(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),x=r.useContext(d.E_),j=x.getPrefixCls,P=x.direction,S=r.useState(!0),w=(0,o.Z)(S,2),N=w[0],F=w[1];r.useEffect((function(){"visible"in O&&F(O.visible)}),[O.visible]);var I=function(){return!!h&&(m.test(h)||v.test(h))},_=(0,l.Z)({backgroundColor:h&&!I()?h:void 0},b),D=I(),T=j("tag",c),R=s()(T,(n={},(0,a.Z)(n,"".concat(T,"-").concat(h),D),(0,a.Z)(n,"".concat(T,"-has-color"),h&&!D),(0,a.Z)(n,"".concat(T,"-hidden"),!N),(0,a.Z)(n,"".concat(T,"-rtl"),"rtl"===P),n),p),B=function(e){e.stopPropagation(),E&&E(e),e.defaultPrevented||"visible"in O||F(!1)},K="onClick"in O||g&&"a"===g.type,M=(0,i.Z)(O,["visible"]),V=y||null,z=V?r.createElement(r.Fragment,null,V,r.createElement("span",null,g)):g,U=r.createElement("span",(0,l.Z)({},M,{ref:t,className:R,style:_}),z,k?C?r.createElement("span",{className:"".concat(T,"-close-icon"),onClick:B},C):r.createElement(u.Z,{className:"".concat(T,"-close-icon"),onClick:B}):null);return K?r.createElement(f.Z,null,U):U},g=r.forwardRef(b);g.displayName="Tag",g.CheckableTag=function(e){var t,n=e.prefixCls,o=e.className,c=e.checked,i=e.onChange,u=e.onClick,p=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n}(e,["prefixCls","className","checked","onChange","onClick"]),f=(0,r.useContext(d.E_).getPrefixCls)("tag",n),m=s()(f,(t={},(0,a.Z)(t,"".concat(f,"-checkable"),!0),(0,a.Z)(t,"".concat(f,"-checkable-checked"),c),t),o);return r.createElement("span",(0,l.Z)({},p,{className:m,onClick:function(e){i&&i(!c),u&&u(e)}}))};const y=g},22854:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(45154),l=n.n(a)()((function(e){return e[1]}));l.push([e.id,"/** @format */\n.toolsBar {\n  background: #fff;\n  padding: 10px;\n}\n.toolsBar .toolsBar-content {\n  padding: 10px;\n  background: #f4f4f4;\n  margin-top: 5px;\n}\n",""]);const o=l},93861:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var a=n(24595),l=n(80346),o=n(34846),r=n(18764),c=n(42774),s=n(26022),i=n(33939),u=n(42205),d=n(15851),p=n(16255),f=n.n(p),m=function(e){(0,i.Z)(n,e);var t=(0,u.Z)(n);function n(e){var a;(0,c.Z)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=a.props,n=t.disabled,l=t.onChange;n||("checked"in a.props||a.setState({checked:e.target.checked}),l&&l({target:(0,r.Z)((0,r.Z)({},a.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},a.saveInput=function(e){a.input=e};var l="checked"in e?e.checked:e.defaultChecked;return a.state={checked:l},a}return(0,s.Z)(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,r=t.className,c=t.style,s=t.name,i=t.id,u=t.type,p=t.disabled,m=t.readOnly,v=t.tabIndex,b=t.onClick,g=t.onFocus,y=t.onBlur,h=t.onKeyDown,E=t.onKeyPress,C=t.onKeyUp,Z=t.autoFocus,k=t.value,O=t.required,x=(0,o.Z)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),j=Object.keys(x).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=x[t]),e}),{}),P=this.state.checked,S=f()(n,r,(e={},(0,l.Z)(e,"".concat(n,"-checked"),P),(0,l.Z)(e,"".concat(n,"-disabled"),p),e));return d.createElement("span",{className:S,style:c},d.createElement("input",(0,a.Z)({name:s,id:i,type:u,required:O,readOnly:m,disabled:p,tabIndex:v,className:"".concat(n,"-input"),checked:!!P,onClick:b,onFocus:g,onBlur:y,onKeyUp:C,onKeyDown:h,onKeyPress:E,onChange:this.handleChange,autoFocus:Z,ref:this.saveInput,value:k},j)),d.createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?(0,r.Z)((0,r.Z)({},t),{},{checked:e.checked}):null}}]),n}(d.Component);m.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};const v=m},4892:(e,t,n)=>{"use strict";var a=n(57574),l=n.n(a),o=n(22854),r=l()(o.default,{insert:"head",singleton:!1});if(!o.default.locals||e.hot.invalidate){var c=o.default.locals;e.hot.accept(22854,(t=>{o=n(22854),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(c,o.default.locals)?(c=o.default.locals,r(o.default)):e.hot.invalidate()}))}e.hot.dispose((function(){r()})),o.default.locals},21685:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(15851),l=n(53922);const o=e=>{const{permsList:t}=l.Z.useContainer();return t.includes(e.name)?a.createElement(a.Fragment,null," ",e.children," "):a.createElement(a.Fragment,null)}},381:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(15851);n(4892);const l=({visible:e,content:t,children:n})=>a.createElement("div",{className:"toolsBar"},a.createElement("div",{className:"flex flex_between"},n),a.createElement("div",{style:{display:e?"block":"none"},className:"toolsBar-content"},t));l.defaultProps={visible:!1};const o=l},25715:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(43865),l=n(58233),o=n(15851);const r=function(e,t){var n;const{form:r}=t,c=(0,a._T)(t,["form"]),s=(0,l.ZP)(e,Object.assign(Object.assign({},c),{paginated:!0,manual:!0})),{params:i,run:u,mutate:d}=s,p=i[2]||{},[f,m]=(0,o.useState)(p.type||"simple"),[v,b]=(0,o.useState)(p.allFormData||{}),g=(0,o.useCallback)((()=>{if(r.getFieldInstance){const e=r.getFieldsValue(),t={};return Object.keys(e).forEach((n=>{r.getFieldInstance&&!r.getFieldInstance(n)||(t[n]=e[n])})),t}return r.getFieldsValue(null,(()=>!0))}),[r]);(0,o.useEffect)((()=>{if(r.getFieldInstance){const e={};Object.keys(v).forEach((t=>{r.getFieldInstance&&!r.getFieldInstance(t)||(e[t]=v[t])})),r.setFieldsValue(e)}else r.setFieldsValue(v)}),[f]),(0,o.useEffect)((()=>{i.length>0?u(...i):t.manual||h()}),[]);const y=(0,o.useCallback)((()=>{const e=g();b(Object.assign(Object.assign({},v),e)),m("simple"===f?"advance":"simple")}),[f,v,g]),h=(0,o.useCallback)((e=>{(null==e?void 0:e.preventDefault)&&e.preventDefault(),setTimeout((()=>{const e=g();console.log(1111,e);const n=Object.assign(Object.assign({},v),e);b(n),u(Object.assign(Object.assign({},i[0]||{}),{pageSize:t.defaultPageSize||10,current:1}),e,{allFormData:n,type:f})}))}),[g,u,i,v,f]),E=(0,o.useCallback)((()=>{r.resetFields(),h()}),[r,h]);return Object.assign(Object.assign({},s),{search:{submit:h,type:f,changeType:y,reset:E},remove:e=>{d((t=>{const n=t.list.slice();return n.forEach(((t,a)=>{t.id===e&&n.splice(a,1)})),Object.assign(Object.assign({},t),{list:n})}))},add:e=>{d((t=>{const n=t.list.slice();return n.push(e),Object.assign(Object.assign({},t),{list:n})}))},update:(e,t)=>{d((n=>{const a=n.list.slice();return a.forEach(((n,l)=>{n.id===e&&(a[l]=Object.assign(Object.assign({},n),t))})),Object.assign(Object.assign({},n),{list:a})}))},dataSource:(null===(n=s.data)||void 0===n?void 0:n.list)||[]})}},29527:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var a=n(43865),l=n(15851),o=n(24595),r=n(76861),c=n(92238),s=n(39444),i=n(16255),u=n.n(i),d=n(26663),p=n(21921),f=n(42795),m=n(83493),v=n(26791),b=p.Z.Option;function g(e){return e&&e.type&&(e.type.isSelectOption||e.type.isSelectOptGroup)}var y=function(e,t){var n,a=e.prefixCls,i=e.className,y=e.children,h=e.dataSource,E=(0,s.Z)(y);if(1===E.length&&(0,v.l$)(E[0])&&!g(E[0])){var C=(0,c.Z)(E,1);n=C[0]}var Z,k=n?function(){return n}:void 0;return Z=E.length&&g(E[0])?y:h?h.map((function(e){if((0,v.l$)(e))return e;switch((0,r.Z)(e)){case"string":return l.createElement(b,{key:e,value:e},e);case"object":var t=e.value;return l.createElement(b,{key:t,value:t},e.text);default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}})):[],l.useEffect((function(){(0,m.Z)(!("dataSource"in e),"AutoComplete","`dataSource` is deprecated, please use `options` instead."),(0,m.Z)(!n||!("size"in e),"AutoComplete","You need to control style self instead of setting `size` when using customize input.")}),[]),l.createElement(f.C,null,(function(n){var r=(0,n.getPrefixCls)("select",a);return l.createElement(p.Z,(0,o.Z)({ref:t},(0,d.Z)(e,["dataSource"]),{prefixCls:r,className:u()("".concat(r,"-auto-complete"),i),mode:p.Z.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:k}),Z)}))},h=l.forwardRef(y);h.Option=b;const E=h;var C=n(36949),Z=n(53985),k=n(72390),O=n(41915),x=n(57100);const j={labelCol:{span:4},wrapperCol:{span:20}},P=[{label:"昵称",value:"name"},{label:"微信昵称",value:"nickName"},{label:"手机号",value:"mobile"}],S=e=>{var t=(0,a._T)(e,[]);const[n,o]=(0,l.useState)(),[r]=C.Z.useForm(),{data:c=[],loading:s,onChange:i}=(0,x.Rx)((e=>{if(!e)return Promise.resolve([]);const t=r.getFieldValue("type");return(0,O.lE)({[t]:e}).then((e=>e.data.map((e=>({value:`昵称：${e.name}；微信昵称：${e.nickName}；手机号码：${e.mobile}`,label:l.createElement("div",{key:e.id},"昵称：",e.name,"；微信昵称：",e.nickName,"；手机号码：",e.mobile),data:e})))))}),[]);return l.createElement(Z.Z,{title:"添加后台成员",maskClosable:!1,visible:t.visible,onCancel:()=>{var e;return null===(e=t.onClose)||void 0===e?void 0:e.call(t)},onOk:e=>(0,a.mG)(void 0,void 0,void 0,(function*(){var a,l;e.preventDefault(),n&&(yield(0,O.Bb)({id:n.id}),null===(a=t.onOk)||void 0===a||a.call(t,n),null===(l=t.onClose)||void 0===l||l.call(t))}))},l.createElement(C.Z,Object.assign({},j,{form:r,initialValues:{type:"name"}}),l.createElement(C.Z.Item,{label:"搜索类型",name:"type"},l.createElement(p.Z,null,P.map((e=>l.createElement(p.Z.Option,{value:e.value,key:e.value},e.label))))),l.createElement(C.Z.Item,{label:"角色",name:"value"},l.createElement(E,{options:c,onSearch:i,onSelect:(e,t)=>{console.log(t.data),o(t.data)},placeholder:"搜索成员"},l.createElement(k.Z.Search,{loading:s})))))}},652:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var a=n(43865),l=n(15851),o=n(36949),r=n(53985),c=n(21921),s=n(83e3),i=n(41915);const u={labelCol:{span:4},wrapperCol:{span:20}},d=e=>{var{data:t}=e,n=(0,a._T)(e,["data"]);const[d,p]=(0,l.useState)([]),[f]=o.Z.useForm();return(0,l.useEffect)((()=>{(0,i.JV)({cache:1}).then((e=>{p(e.data)}))}),[]),(0,l.useEffect)((()=>{t&&f.setFieldsValue(t)}),[t]),l.createElement(r.Z,{title:"修改成员",maskClosable:!1,visible:n.visible,onCancel:()=>{var e;return null===(e=n.onClose)||void 0===e?void 0:e.call(n)},onOk:e=>{e.preventDefault(),f.validateFields().then((e=>(0,a.mG)(void 0,void 0,void 0,(function*(){var a,l;const o=Object.assign({},e);yield(0,i.uo)(null==t?void 0:t.id,e),null===(a=n.onClose)||void 0===a||a.call(n),null===(l=n.onOk)||void 0===l||l.call(n,Object.assign(Object.assign({},t),o))}))))}},l.createElement(o.Z,Object.assign({},u,{form:f}),l.createElement(o.Z.Item,{label:"角色",name:"role_ids",required:!0},l.createElement(c.Z,{mode:"multiple"},d.map((e=>l.createElement(c.Z.Option,{key:e.id,value:e.id},e.name))))),l.createElement(o.Z.Item,{label:"状态",name:"status"},l.createElement(s.ZP.Group,null,l.createElement(s.ZP,{value:1},"启用"),l.createElement(s.ZP,{value:0},"禁用")))))}},61598:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var a=n(15851),l=n(36949),o=n(9504),r=n(72145),c=n(72390),s=n(21921),i=n(80471),u=n(25715),d=n(652),p=n(29527),f=n(381),m=n(41915),v=n(57100),b=n(21685),g=n(74848);const y=(e,t)=>m.kb(Object.assign(Object.assign({},e),t)).then((e=>({total:e.total,list:e.data}))),h=()=>{const[e,t]=(0,a.useState)(),[n]=l.Z.useForm(),h=(0,v.kt)(!1),E=(0,v.kt)(!1),{tableProps:C,search:Z,refresh:k,update:O,add:x}=(0,u.Z)(y,{defaultPageSize:20,form:n}),j=(0,v.QT)((()=>m.zP("sys_user_sex",{cache:1}))),P=(0,v.QT)((()=>m.JV({cache:1}))),{submit:S}=Z||{},w=[{title:"姓名",dataIndex:"nickName"},{title:"手机",dataIndex:"mobile"},{title:"性别",key:"gender",render:e=>a.createElement("div",null,(e=>{var t;const n=null===(t=j.data)||void 0===t?void 0:t.data.find((t=>t.value==e));return n?n.label:e})(e.gender))},{title:"角色",key:"role",render:e=>{var t;return a.createElement("div",null,null===(t=e.role_ids)||void 0===t?void 0:t.map((e=>a.createElement(o.Z,{key:e},(e=>{var t;const n=null===(t=P.data)||void 0===t?void 0:t.data.find((t=>t.id==e));return n?n.name:e})(e)))))}},{title:"状态",key:"status",render:e=>a.createElement("div",null,1===e.status?"正常":"停用")},{title:"操作",key:"action",render:e=>a.createElement("div",null,a.createElement(b.Z,{name:g.g3.SYSTEM_USER_EDIT},a.createElement(r.Z,{onClick:()=>(t(e),void E.toggle())},"修改")))}];return a.createElement("div",null,a.createElement(f.Z,null,a.createElement(l.Z,{form:n,layout:"inline"},a.createElement(l.Z.Item,{name:"nickName"},a.createElement(c.Z.Search,{placeholder:"名字",onSearch:S})),a.createElement(l.Z.Item,{name:"status"},a.createElement(s.Z,{placeholder:"用户状态",style:{width:"140px"},allowClear:!0,onChange:S},a.createElement(s.Z.Option,{value:"0"},"暂停"),a.createElement(s.Z.Option,{value:"1"},"启用")))),a.createElement("div",null,a.createElement(b.Z,{name:g.g3.SYSTEM_USER_ADD},a.createElement(r.Z,{type:"primary",onClick:()=>h.toggle()},"新增")),"  ",a.createElement(r.Z,{onClick:k},"刷新"))),a.createElement("div",{style:{background:"#fff"}},a.createElement(i.Z,Object.assign({rowKey:"id",columns:w},C))),a.createElement(d.default,{visible:E.state,onClose:E.toggle,data:e,onOk:e=>O(e.id,e)}),a.createElement(p.default,{visible:h.state,onClose:h.toggle,onOk:e=>x(e)}))}}}]);