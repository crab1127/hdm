(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{237:function(e,l,a){"use strict";a.r(l);var t=a(44),n=a(0),i=a.n(n),o=a(919),s=a(918),d=a(920),r=a(76);let c;var u=e=>(Object(n.useEffect)(()=>{var l;const a=window.AMap;var t=new a.Map("map-location",{zoom:15,center:(null===(l=e.positons)||void 0===l?void 0:l.length)?e.positons:[116.473188,39.993253]});t.on("click",(function(l){var n;c&&t.remove(c),c=new a.Marker({position:new a.LngLat(l.lnglat.lng,l.lnglat.lat),title:"xx"}),t.add(c),null===(n=e.onPick)||void 0===n||n.call(e,{lat:l.lnglat.lat,lng:l.lnglat.lng})})),e.positons&&e.positons.length&&(c=new a.Marker({position:new a.LngLat(e.positons[0],e.positons[1]),title:"xx"}),t.add(c))},[]),i.a.createElement("div",{id:"map-location",style:Object.assign({width:"500px",height:"300px"},e.style)}));const m={labelCol:{span:4},wrapperCol:{span:20}};l.default=e=>{var{data:l}=e,a=Object(t.b)(e,["data"]);const[c]=o.a.useForm();Object(n.useEffect)(()=>{a.visible&&setTimeout(()=>{l?c.setFieldsValue(Object.assign({},l)):c.resetFields()})},[a.visible]);return i.a.createElement(s.a,{title:(null==l?void 0:l.id)?"编辑门店":"添加门店",maskClosable:!1,width:700,visible:a.visible,onCancel:()=>{var e;null===(e=a.onClose)||void 0===e||e.call(a)},onOk:e=>{e.preventDefault(),c.validateFields().then(e=>Object(t.a)(void 0,void 0,void 0,(function*(){var t,n;const i=Object.assign(Object.assign({},l),e);(null==l?void 0:l.id)?yield Object(r.T)(l.id,e):yield Object(r.b)(e),null===(t=a.onClose)||void 0===t||t.call(a),null===(n=a.onOk)||void 0===n||n.call(a,(null==l?void 0:l.id)?"update":"create",i)})))}},a.visible&&i.a.createElement(o.a,Object.assign({form:c},m),i.a.createElement(o.a.Item,{label:"公司名",name:"name",rules:[{required:!0}]},i.a.createElement(d.a,null)),i.a.createElement(o.a.Item,{label:"联系人",name:"contacts"},i.a.createElement(d.a,null)),i.a.createElement(o.a.Item,{label:"联系电话",name:"mobile"},i.a.createElement(d.a,null)),i.a.createElement(o.a.Item,{label:"地址",name:"address",rules:[{required:!0}]},i.a.createElement(d.a,null)),i.a.createElement(o.a.Item,{label:"选择坐标",style:{marginBottom:0},rules:[{required:!0}]},i.a.createElement(o.a.Item,{name:"longitude",rules:[{required:!0}],style:{display:"inline-block",width:"calc(50% - 8px)"}},i.a.createElement(d.a,{placeholder:"经度",disabled:!0})),i.a.createElement(o.a.Item,{name:"latitude",rules:[{required:!0}],style:{display:"inline-block",width:"calc(50% - 8px)",margin:"0 8px"}},i.a.createElement(d.a,{placeholder:"纬度",disabled:!0}))),i.a.createElement(o.a.Item,{wrapperCol:{offset:4}},i.a.createElement(u,{positons:(null==l?void 0:l.longitude)&&(null==l?void 0:l.latitude)?[l.longitude,l.latitude]:[],onPick:e=>{c.setFieldsValue({longitude:e.lng,latitude:e.lat})}}))))}}}]);