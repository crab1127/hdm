(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{159:function(e,t,a){"use strict";a.r(t);var n=a(5),l=a(1),r=a.n(l),s=a(3),i=a(4),c=a(205),o=a(206),d=a(203),u=a.n(d),m=a(8),f=a(9),b=a(737),p=a(738),h=a.n(p);function v(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),n=0;n!=e.length;++n)a[n]=255&e.charCodeAt(n);return t}function g({multiHeader:e=[],header:t,data:a,filename:n,merges:l=[],autoWidth:r=!0,bookType:s="xlsx"}={}){n=n||"excel-list",(a=[...a]).unshift(t);for(let t=e.length-1;t>-1;t--)a.unshift(e[t]);var i={SheetNames:[],Sheets:{}},c=function(e,t){for(var a,n={},l={s:{c:1e7,r:1e7},e:{c:0,r:0}},r=0;r!=e.length;++r)for(var s=0;s!=e[r].length;++s){l.s.r>r&&(l.s.r=r),l.s.c>s&&(l.s.c=s),l.e.r<r&&(l.e.r=r),l.e.c<s&&(l.e.c=s);var i={v:e[r][s]};if(null!=i.v){var c=h.a.utils.encode_cell({c:s,r:r});"number"==typeof i.v?i.t="n":"boolean"==typeof i.v?i.t="b":i.v instanceof Date?(i.t="n",i.z=h.a.SSF._table[14],i.v=(a=i.v,void 0&&(a+=1462),(Date.parse(a)-new Date(Date.UTC(1899,11,30)).getTime())/864e5)):i.t="s",n[c]=i}}return l.s.c<1e7&&(n["!ref"]=h.a.utils.encode_range(l)),n}(a);if(l.length>0&&(c["!merges"]||(c["!merges"]=[]),l.forEach(e=>{c["!merges"].push(h.a.utils.decode_range(e))})),r){const e=a.map(e=>e.map(e=>null==e?{wch:10}:e.toString().charCodeAt(0)>255?{wch:2*e.toString().length}:{wch:e.toString().length}));let t=e[0];for(let a=1;a<e.length;a++)for(let n=0;n<e[a].length;n++)t[n].wch<e[a][n].wch&&(t[n].wch=e[a][n].wch);c["!cols"]=t}i.SheetNames.push("SheetJS"),i.Sheets.SheetJS=c;var o=h.a.write(i,{bookType:s,bookSST:!1,type:"binary"});Object(b.saveAs)(new Blob([v(o)],{type:"application/octet-stream"}),`${n}.${s}`)}const{RangePicker:O}=i.DatePicker;var y=e=>{const[t]=i.Form.useForm();return r.a.createElement(i.Modal,{title:"下载",maskClosable:!1,visible:e.visible,onCancel:()=>e.onClose(),onOk:a=>{a.preventDefault(),t.validateFields().then(t=>Object(n.a)(void 0,void 0,void 0,(function*(){try{const a=u()(t.time[0]).format("YYYY-MM-DD HH:mm:ss"),n=u()(t.time[1]).format("YYYY-MM-DD HH:mm:ss");let l=(t=>t.map(t=>e.header.map(e=>t[e.id])))(yield e.onFetchData({startTime:a,endTime:n}));g({header:e.header.map(e=>e.name),data:l,filename:t.title,autoWidth:!0,bookType:"xlsx"})}catch(e){i.message.error("下载失败，请重试")}finally{e.onClose()}})))}},r.a.createElement(i.Form,{form:t},r.a.createElement(i.Form.Item,{label:"名称",name:"title",rules:[{required:!0}]},r.a.createElement(i.Input,null)),r.a.createElement(i.Form.Item,{label:"下载时间",name:"time",rules:[{required:!0}]},r.a.createElement(O,{allowClear:!1}))))},j=a(208);t.default=()=>{const e=Object(j.a)(!1),t=Object(s.useHistory)(),[a]=i.Form.useForm(),{tableProps:l,search:d,refresh:b}=Object(c.a)((e,t)=>Object(m.lb)(Object.assign(Object.assign({},e),t)).then(e=>({total:e.total,list:e.data})),{defaultPageSize:20,form:a}),{submit:p}=d||{},h=e=>{console.log(e)},v=[{title:"订单号",dataIndex:"id"},{title:"类型",key:"type_id",render:(e,t)=>{var a;return r.a.createElement(i.Tag,null,null===(a=f.f.find(e=>e.value===t.type_id))||void 0===a?void 0:a.label)}},{title:"订单信息",dataIndex:"name",width:300},{title:"收货地址",key:"address_id",width:200,render:(e,t)=>r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex-item"},r.a.createElement("div",null,t.address_name,", ",t.address_mobile),r.a.createElement("div",null,t.address_detail)))},{title:"服务费",key:"reward",render:(e,t)=>r.a.createElement("div",null,"跑腿费: ",t.reward,"元， ",t.reward_extra?`小费:${t.reward_extra}元`:"")},{title:"骑手",dataIndex:"horseman_name"},{title:"状态",key:"status",render:(e,t)=>{var a;return null===(a=f.e.find(e=>e.value===t.status))||void 0===a?void 0:a.label}},{title:"下单时间",key:"create_time",render:(e,t)=>u()(t.create_time).format("YYYY-MM-DD HH:mm")},{title:"操作",key:"action",render:(e,a)=>r.a.createElement("div",null,2===a.status&&r.a.createElement(i.Button,{onClick:()=>h(a),type:"link"},"指派"),3===a.status&&r.a.createElement(i.Button,{onClick:()=>h(a),type:"link"},"重新指定骑手"),r.a.createElement(i.Button,{onClick:()=>t.push({pathname:`/order/task/${a.id}`,state:a}),type:"link"},"详情"))}];return r.a.createElement("div",null,r.a.createElement(o.a,{visible:!1},r.a.createElement(i.Form,{form:a,layout:"inline"},r.a.createElement(i.Form.Item,{name:"id"},r.a.createElement(i.Input.Search,{placeholder:"订单号",onSearch:p})),r.a.createElement(i.Form.Item,{name:"type_id"},r.a.createElement(i.Select,{placeholder:"订单类型",style:{width:"140px"},allowClear:!0,onChange:p},f.f.map(e=>r.a.createElement(i.Select.Option,{key:e.value,value:e.value},e.label)))),r.a.createElement(i.Form.Item,{name:"status"},r.a.createElement(i.Select,{placeholder:"订单状态",style:{width:"140px"},allowClear:!0,onChange:p},f.e.map(e=>r.a.createElement(i.Select.Option,{key:e.value,value:e.value},e.label))))),r.a.createElement("div",null,r.a.createElement(i.Button,{onClick:()=>e.setTrue()},"导出execl"),"  ",r.a.createElement(i.Button,{onClick:b},"刷新"))),r.a.createElement(i.Table,Object.assign({columns:v,rowKey:"id"},l)),r.a.createElement(y,{visible:e.state,onClose:e.setFalse,header:v.map(e=>({name:e.title,id:e.dataIndex||e.key})),onFetchData:e=>Object(n.a)(void 0,void 0,void 0,(function*(){return(yield Object(m.lb)(Object.assign(Object.assign({},e),{limit:1e3}))).data}))}))}},202:function(e,t,a){(t=a(15)(!1)).push([e.i,"/** @format */\n.toolsBar {\n  background: #fff;\n  padding-bottom: 15px;\n}\n.toolsBar.toolsBar_space {\n  padding: 12px;\n}\n.toolsBar .toolsBar-content {\n  padding: 10px;\n  background: #f4f4f4;\n  margin-top: 5px;\n}\n",""]),e.exports=t},203:function(e,t,a){e.exports=a(6)(3e3)},205:function(e,t,a){"use strict";var n=a(5),l=a(214),r=a(1);t.a=function(e,t){var a;const{form:s}=t,i=Object(n.b)(t,["form"]),c=Object(l.a)(e,Object.assign(Object.assign({},i),{paginated:!0,manual:!0})),{params:o,run:d,mutate:u}=c,m=o[2]||{},[f,b]=Object(r.useState)(m.type||"simple"),[p,h]=Object(r.useState)(m.allFormData||{}),v=Object(r.useCallback)(()=>{if(s.getFieldInstance){const e=s.getFieldsValue(),t={};return Object.keys(e).forEach(a=>{s.getFieldInstance&&!s.getFieldInstance(a)||(t[a]=e[a])}),t}return s.getFieldsValue(null,()=>!0)},[s]);Object(r.useEffect)(()=>{if(s.getFieldInstance){const e={};Object.keys(p).forEach(t=>{s.getFieldInstance&&!s.getFieldInstance(t)||(e[t]=p[t])}),s.setFieldsValue(e)}else s.setFieldsValue(p)},[f]),Object(r.useEffect)(()=>{o.length>0?d(...o):t.manual||O()},[]);const g=Object(r.useCallback)(()=>{const e=v();h(Object.assign(Object.assign({},p),e)),b("simple"===f?"advance":"simple")},[f,p,v]),O=Object(r.useCallback)(e=>{(null==e?void 0:e.preventDefault)&&e.preventDefault(),setTimeout(()=>{const e=v();console.log(1111,e);const t=Object.assign(Object.assign({},p),e);h(t),d(Object.assign(Object.assign({},o[0]||{}),{current:1}),e,{allFormData:t,type:f})})},[v,d,o,p,f]),y=Object(r.useCallback)(()=>{s.resetFields(),O()},[s,O]);return Object.assign(Object.assign({},c),{search:{submit:O,type:f,changeType:g,reset:y},remove:e=>{u(t=>{const a=t.list.slice();return a.forEach((t,n)=>{t.id===e&&a.splice(n,1)}),Object.assign(Object.assign({},t),{list:a})})},add:e=>{u(t=>{const a=t.list.slice();return a.push(e),Object.assign(Object.assign({},t),{list:a})})},update:(e,t)=>{u(a=>{const n=a.list.slice();return n.forEach((a,l)=>{a.id===e&&(n[l]=Object.assign(Object.assign({},a),t))}),Object.assign(Object.assign({},a),{list:n})})},dataSource:(null===(a=c.data)||void 0===a?void 0:a.list)||[]})}},206:function(e,t,a){"use strict";var n=a(1),l=a.n(n),r=a(21),s=a.n(r);a(207);const i=({visible:e,content:t,space:a,children:n})=>l.a.createElement("div",{className:s()({toolsBar_space:a},"toolsBar")},l.a.createElement("div",{className:"flex flex_between"},n),l.a.createElement("div",{style:{display:e?"block":"none"},className:"toolsBar-content"},t));i.defaultProps={visible:!1,space:!1},t.a=i},207:function(e,t,a){var n=a(14),l=a(202);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var r={insert:"head",singleton:!1},s=n(l,r);if(!l.locals||e.hot.invalidate){var i=l.locals;e.hot.accept(202,(function(){"string"==typeof(l=(l=a(202)).__esModule?l.default:l)&&(l=[[e.i,l,""]]),function(e,t){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(i,l.locals)?(i=l.locals,s(l)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),e.exports=l.locals||{}},209:function(e,t,a){e.exports=a(6)(408)},211:function(e,t,a){e.exports=a(6)(75)},431:function(e,t){},743:function(e,t){},744:function(e,t){}}]);