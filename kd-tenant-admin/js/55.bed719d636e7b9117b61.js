(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{157:function(e,t,a){"use strict";a.r(t);var n=a(5),l=a(1),s=a.n(l),c=a(4),i=a(3),r=a(207),o=a(208),u=a(8),m=a(206),d=a.n(m),p=a(16);const b=(e,t)=>u.eb(Object.assign(Object.assign({},e),t)).then(e=>({total:e.total,list:e.data}));t.default=()=>{const[e]=c.Form.useForm(),t=Object(i.useHistory)(),{tableProps:a,search:l,refresh:u}=Object(r.a)(b,{defaultPageSize:20,form:e}),{type:m,changeType:f,submit:g,reset:O}=l||{},E=[{title:"id",dataIndex:"id"},{title:"logo",key:"logo",render:(e,t)=>s.a.createElement("img",{src:Object(p.b)(t.logo),width:"30"})},{title:"名称",dataIndex:"name"},{title:"店长",dataIndex:"user_id"},{title:"电话",dataIndex:"mobile"},{title:"营业时间",dataIndex:"business_hours"},{title:"备注",dataIndex:"remark"},{title:"状态",key:"status",render:(e,t)=>s.a.createElement("div",null,1===t.status?"营业":"",2===t.status?"不营业":"",0===t.status?"关闭":"")},{title:"创建时间",key:"create_time",render:e=>s.a.createElement("span",null," ",d()(e.create_time).format("YYYY-MM-DD"))},{title:"操作",key:"action",render:e=>s.a.createElement("div",null,s.a.createElement(c.Button,{onClick:()=>(e=>Object(n.a)(void 0,void 0,void 0,(function*(){t.push({pathname:`/shop/jobs/${e.id}`})})))(e),type:"link"},"详情"))}],h=s.a.createElement(c.Form,{form:e,layout:"inline"},s.a.createElement(c.Form.Item,{name:"name",label:"名字"},s.a.createElement(c.Input,{placeholder:"名字",style:{width:140,marginRight:16}})),s.a.createElement(c.Form.Item,{name:"mobile",label:"电话"},s.a.createElement(c.Input,{placeholder:"电话",style:{width:140,marginRight:16}})),s.a.createElement(c.Form.Item,{name:"status",label:"状态"},s.a.createElement(c.Select,{placeholder:"状态",style:{width:140,marginRight:16},allowClear:!0},s.a.createElement(c.Select.Option,{value:"0"},"暂停"),s.a.createElement(c.Select.Option,{value:"1"},"启用"))),s.a.createElement(c.Button,{type:"primary",onClick:g},"搜索"),"  ",s.a.createElement(c.Button,{onClick:O},"重置"));return s.a.createElement("div",null,s.a.createElement(o.a,{visible:"simple"!==m,content:h},s.a.createElement("div",{className:"flex"},s.a.createElement(c.Form,{form:e,layout:"inline"},s.a.createElement(c.Form.Item,{name:"name"},s.a.createElement(c.Input.Search,{placeholder:"名字",onSearch:g})),s.a.createElement(c.Form.Item,{name:"status"},s.a.createElement(c.Select,{placeholder:"状态",style:{width:"140px"},allowClear:!0,onChange:g},s.a.createElement(c.Select.Option,{value:"0"},"暂停"),s.a.createElement(c.Select.Option,{value:"1"},"启用")))),s.a.createElement(c.Button,{type:"link",onClick:f},"高级搜索")),s.a.createElement("div",null,s.a.createElement(c.Button,{type:"primary",onClick:()=>Object(n.a)(void 0,void 0,void 0,(function*(){}))},"新增"),"  ",s.a.createElement(c.Button,{onClick:u},"刷新"))),s.a.createElement("div",{style:{background:"#fff"}},s.a.createElement(c.Table,Object.assign({},a,{columns:E,rowKey:"id"}))))}},205:function(e,t,a){(t=a(15)(!1)).push([e.i,"/** @format */\n.toolsBar {\n  background: #fff;\n  padding-bottom: 15px;\n}\n.toolsBar.toolsBar_space {\n  padding: 12px;\n}\n.toolsBar .toolsBar-content {\n  padding: 10px;\n  background: #f4f4f4;\n  margin-top: 5px;\n}\n",""]),e.exports=t},206:function(e,t,a){e.exports=a(6)(3e3)},207:function(e,t,a){"use strict";var n=a(5),l=a(217),s=a(1);t.a=function(e,t){var a;const{form:c}=t,i=Object(n.b)(t,["form"]),r=Object(l.a)(e,Object.assign(Object.assign({},i),{paginated:!0,manual:!0})),{params:o,run:u,mutate:m}=r,d=o[2]||{},[p,b]=Object(s.useState)(d.type||"simple"),[f,g]=Object(s.useState)(d.allFormData||{}),O=Object(s.useCallback)(()=>{if(c.getFieldInstance){const e=c.getFieldsValue(),t={};return Object.keys(e).forEach(a=>{c.getFieldInstance&&!c.getFieldInstance(a)||(t[a]=e[a])}),t}return c.getFieldsValue(null,()=>!0)},[c]);Object(s.useEffect)(()=>{if(c.getFieldInstance){const e={};Object.keys(f).forEach(t=>{c.getFieldInstance&&!c.getFieldInstance(t)||(e[t]=f[t])}),c.setFieldsValue(e)}else c.setFieldsValue(f)},[p]),Object(s.useEffect)(()=>{o.length>0?u(...o):t.manual||h()},[]);const E=Object(s.useCallback)(()=>{const e=O();g(Object.assign(Object.assign({},f),e)),b("simple"===p?"advance":"simple")},[p,f,O]),h=Object(s.useCallback)(e=>{(null==e?void 0:e.preventDefault)&&e.preventDefault(),setTimeout(()=>{const e=O();console.log(1111,e);const t=Object.assign(Object.assign({},f),e);g(t),u(Object.assign(Object.assign({},o[0]||{}),{current:1}),e,{allFormData:t,type:p})})},[O,u,o,f,p]),j=Object(s.useCallback)(()=>{c.resetFields(),h()},[c,h]);return Object.assign(Object.assign({},r),{search:{submit:h,type:p,changeType:E,reset:j},remove:e=>{m(t=>{const a=t.list.slice();return a.forEach((t,n)=>{t.id===e&&a.splice(n,1)}),Object.assign(Object.assign({},t),{list:a})})},add:e=>{m(t=>{const a=t.list.slice();return a.push(e),Object.assign(Object.assign({},t),{list:a})})},update:(e,t)=>{m(a=>{const n=a.list.slice();return n.forEach((a,l)=>{a.id===e&&(n[l]=Object.assign(Object.assign({},a),t))}),Object.assign(Object.assign({},a),{list:n})})},dataSource:(null===(a=r.data)||void 0===a?void 0:a.list)||[]})}},208:function(e,t,a){"use strict";var n=a(1),l=a.n(n),s=a(21),c=a.n(s);a(209);const i=({visible:e,content:t,space:a,children:n})=>l.a.createElement("div",{className:c()({toolsBar_space:a},"toolsBar")},l.a.createElement("div",{className:"flex flex_between"},n),l.a.createElement("div",{style:{display:e?"block":"none"},className:"toolsBar-content"},t));i.defaultProps={visible:!1,space:!1},t.a=i},209:function(e,t,a){var n=a(14),l=a(205);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);var s={insert:"head",singleton:!1},c=n(l,s);if(!l.locals||e.hot.invalidate){var i=l.locals;e.hot.accept(205,(function(){"string"==typeof(l=(l=a(205)).__esModule?l.default:l)&&(l=[[e.i,l,""]]),function(e,t){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(i,l.locals)?(i=l.locals,c(l)):e.hot.invalidate()}))}e.hot.dispose((function(){c()})),e.exports=l.locals||{}},213:function(e,t,a){e.exports=a(6)(408)}}]);