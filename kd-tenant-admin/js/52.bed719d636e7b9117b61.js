(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{135:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),l=a(3),c=a(4),i=a(207),o=a(208),r=a(206),d=a.n(r),u=a(8),b=a(9),m=a(16);t.default=()=>{const e=Object(l.useRouteMatch)(),[t]=c.Form.useForm(),{tableProps:a,search:n,refresh:r}=Object(i.a)((t,a)=>Object(u.cb)(Object.assign(Object.assign({shop_id:e.params.id},t),a)).then(e=>({total:e.total,list:e.data})),{defaultPageSize:20,form:t}),{submit:p}=n||{},f=[{title:"id",dataIndex:"id"},{title:"订单",dataIndex:"business_no"},{title:"业务名称",width:250,dataIndex:"name"},{title:"业务类型：",key:"type",render:(e,t)=>{var a;return null===(a=b.d.find(e=>e.value===t.type))||void 0===a?void 0:a.label}},{title:"交易金额",key:"amount",render:(e,t)=>Object(m.a)(t.amount)},{title:"余额",key:"end_balance",render:(e,t)=>Object(m.a)(t.end_balance)},{title:"商店",dataIndex:"shop_name"},{title:"骑手",dataIndex:"horseman_name"},{title:"客户",dataIndex:"user_name"},{title:"创建时间",key:"create_time",render:e=>d()(e.create_time).format("YYYY-MM-DD HH:mm")}];return s.a.createElement("div",null,s.a.createElement(o.a,{visible:!1},s.a.createElement(c.Form,{form:t,layout:"inline"},s.a.createElement(c.Form.Item,{name:"name"},s.a.createElement(c.Input.Search,{placeholder:"名字",onSearch:p})),s.a.createElement(c.Form.Item,{name:"type_id"},s.a.createElement(c.Select,{placeholder:"分类",style:{width:"140px"},allowClear:!0,onChange:p},null===b.d||void 0===b.d?void 0:b.d.map(e=>s.a.createElement(c.Select.Option,{key:e.value,value:e.value},e.label))))),s.a.createElement("div",null,"  ",s.a.createElement(c.Button,{onClick:r},"刷新"))),s.a.createElement(c.Table,Object.assign({columns:f,rowKey:"id"},a)))}},205:function(e,t,a){(t=a(15)(!1)).push([e.i,"/** @format */\n.toolsBar {\n  background: #fff;\n  padding-bottom: 15px;\n}\n.toolsBar.toolsBar_space {\n  padding: 12px;\n}\n.toolsBar .toolsBar-content {\n  padding: 10px;\n  background: #f4f4f4;\n  margin-top: 5px;\n}\n",""]),e.exports=t},206:function(e,t,a){e.exports=a(6)(3e3)},207:function(e,t,a){"use strict";var n=a(5),s=a(217),l=a(1);t.a=function(e,t){var a;const{form:c}=t,i=Object(n.b)(t,["form"]),o=Object(s.a)(e,Object.assign(Object.assign({},i),{paginated:!0,manual:!0})),{params:r,run:d,mutate:u}=o,b=r[2]||{},[m,p]=Object(l.useState)(b.type||"simple"),[f,g]=Object(l.useState)(b.allFormData||{}),O=Object(l.useCallback)(()=>{if(c.getFieldInstance){const e=c.getFieldsValue(),t={};return Object.keys(e).forEach(a=>{c.getFieldInstance&&!c.getFieldInstance(a)||(t[a]=e[a])}),t}return c.getFieldsValue(null,()=>!0)},[c]);Object(l.useEffect)(()=>{if(c.getFieldInstance){const e={};Object.keys(f).forEach(t=>{c.getFieldInstance&&!c.getFieldInstance(t)||(e[t]=f[t])}),c.setFieldsValue(e)}else c.setFieldsValue(f)},[m]),Object(l.useEffect)(()=>{r.length>0?d(...r):t.manual||v()},[]);const j=Object(l.useCallback)(()=>{const e=O();g(Object.assign(Object.assign({},f),e)),p("simple"===m?"advance":"simple")},[m,f,O]),v=Object(l.useCallback)(e=>{(null==e?void 0:e.preventDefault)&&e.preventDefault(),setTimeout(()=>{const e=O();console.log(1111,e);const t=Object.assign(Object.assign({},f),e);g(t),d(Object.assign(Object.assign({},r[0]||{}),{current:1}),e,{allFormData:t,type:m})})},[O,d,r,f,m]),h=Object(l.useCallback)(()=>{c.resetFields(),v()},[c,v]);return Object.assign(Object.assign({},o),{search:{submit:v,type:m,changeType:j,reset:h},remove:e=>{u(t=>{const a=t.list.slice();return a.forEach((t,n)=>{t.id===e&&a.splice(n,1)}),Object.assign(Object.assign({},t),{list:a})})},add:e=>{u(t=>{const a=t.list.slice();return a.push(e),Object.assign(Object.assign({},t),{list:a})})},update:(e,t)=>{u(a=>{const n=a.list.slice();return n.forEach((a,s)=>{a.id===e&&(n[s]=Object.assign(Object.assign({},a),t))}),Object.assign(Object.assign({},a),{list:n})})},dataSource:(null===(a=o.data)||void 0===a?void 0:a.list)||[]})}},208:function(e,t,a){"use strict";var n=a(1),s=a.n(n),l=a(21),c=a.n(l);a(209);const i=({visible:e,content:t,space:a,children:n})=>s.a.createElement("div",{className:c()({toolsBar_space:a},"toolsBar")},s.a.createElement("div",{className:"flex flex_between"},n),s.a.createElement("div",{style:{display:e?"block":"none"},className:"toolsBar-content"},t));i.defaultProps={visible:!1,space:!1},t.a=i},209:function(e,t,a){var n=a(14),s=a(205);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var l={insert:"head",singleton:!1},c=n(s,l);if(!s.locals||e.hot.invalidate){var i=s.locals;e.hot.accept(205,(function(){"string"==typeof(s=(s=a(205)).__esModule?s.default:s)&&(s=[[e.i,s,""]]),function(e,t){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(i,s.locals)?(i=s.locals,c(s)):e.hot.invalidate()}))}e.hot.dispose((function(){c()})),e.exports=s.locals||{}},213:function(e,t,a){e.exports=a(6)(408)}}]);