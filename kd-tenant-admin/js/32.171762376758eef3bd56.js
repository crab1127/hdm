(window.webpackJsonp=window.webpackJsonp||[]).push([[32,114,115],{146:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),l=a(3),i=a(4),c=a(205),r=a(73),o=a(74),u=a(206),d=a(8),b=a(203),m=a.n(b),p=a(208);const g=[{label:"教育",value:1},{label:"餐饮",value:5},{label:"超市便利",value:6},{label:"驾校",value:7}];t.default=()=>{const e=Object(l.useRouteMatch)(),t=Object(p.a)(!1),a=Object(p.a)(!1),[b,f]=Object(n.useState)(),[v]=i.Form.useForm(),{tableProps:O,search:j,refresh:E,update:h,add:k}=Object(c.a)((e,t)=>d.O(Object.assign(Object.assign({},e),t)).then(e=>({total:e.total,list:e.data})),{defaultPageSize:20,form:v}),{submit:F}=j||{},y=[{title:"id",dataIndex:"id"},{title:"门店名称",dataIndex:"name"},{title:"联系人",dataIndex:"mobile"},{title:"联系方式",dataIndex:"mobile"},{title:"门店类型",key:"kd_one_category_id",render:e=>{var t;return null===(t=g.find(t=>t.value===e.kd_one_category_id))||void 0===t?void 0:t.label}},{title:"抽成比率",key:"shop_cut",render:e=>e.shop_cut+"%"},{title:"骑手运费",key:"postage",render:e=>e.postage/100+"元"},{title:"入驻时间",key:"create_time",render:e=>m()(e.create_time).format("YYYY-MM-DD HH:mm")},{title:"操作",key:"action",render:e=>s.a.createElement(i.Space,null,s.a.createElement(i.Button,{type:"primary",onClick:()=>{var a;a=e,f(Object.assign(Object.assign({},a),{postage:a.postage/100})),t.toggle()}},"设置"),s.a.createElement(i.Button,{type:"primary",onClick:()=>{var t;t=e,f(Object.assign(Object.assign({},t),{postage:t.postage/100})),a.toggle()}},"小程序预览"))}];return s.a.createElement("div",null,s.a.createElement(u.a,{visible:!1},s.a.createElement(i.Form,{form:v,layout:"inline",initialValues:{kd_status:"0"}},s.a.createElement(i.Form.Item,{name:"name"},s.a.createElement(i.Input.Search,{placeholder:"名字",onSearch:F})),s.a.createElement(i.Form.Item,{name:"kd_one_category_id"},s.a.createElement(i.Select,{placeholder:"店铺类型",style:{width:"140px"},allowClear:!0,onChange:F},g.map(e=>s.a.createElement(i.Select.Option,{value:e.value},e.label))))),s.a.createElement("div",null,"  ",s.a.createElement(i.Button,{onClick:E},"刷新"))),s.a.createElement(i.Table,Object.assign({columns:y,rowKey:"id"},O)),s.a.createElement(r.default,{id:parseInt(e.params.id),visible:t.state,data:b,setVisible:t.toggle,onOk:(e,t)=>{console.log(t),"update"===e?h(t.id,t):k(t),E()}}),s.a.createElement(o.default,{id:parseInt(e.params.id),visible:a.state,data:b,setVisible:a.toggle}))}},202:function(e,t,a){(t=a(15)(!1)).push([e.i,"/** @format */\n.toolsBar {\n  background: #fff;\n  padding-bottom: 15px;\n}\n.toolsBar.toolsBar_space {\n  padding: 12px;\n}\n.toolsBar .toolsBar-content {\n  padding: 10px;\n  background: #f4f4f4;\n  margin-top: 5px;\n}\n",""]),e.exports=t},203:function(e,t,a){e.exports=a(6)(3e3)},205:function(e,t,a){"use strict";var n=a(5),s=a(214),l=a(1);t.a=function(e,t){var a;const{form:i}=t,c=Object(n.b)(t,["form"]),r=Object(s.a)(e,Object.assign(Object.assign({},c),{paginated:!0,manual:!0})),{params:o,run:u,mutate:d}=r,b=o[2]||{},[m,p]=Object(l.useState)(b.type||"simple"),[g,f]=Object(l.useState)(b.allFormData||{}),v=Object(l.useCallback)(()=>{if(i.getFieldInstance){const e=i.getFieldsValue(),t={};return Object.keys(e).forEach(a=>{i.getFieldInstance&&!i.getFieldInstance(a)||(t[a]=e[a])}),t}return i.getFieldsValue(null,()=>!0)},[i]);Object(l.useEffect)(()=>{if(i.getFieldInstance){const e={};Object.keys(g).forEach(t=>{i.getFieldInstance&&!i.getFieldInstance(t)||(e[t]=g[t])}),i.setFieldsValue(e)}else i.setFieldsValue(g)},[m]),Object(l.useEffect)(()=>{o.length>0?u(...o):t.manual||j()},[]);const O=Object(l.useCallback)(()=>{const e=v();f(Object.assign(Object.assign({},g),e)),p("simple"===m?"advance":"simple")},[m,g,v]),j=Object(l.useCallback)(e=>{(null==e?void 0:e.preventDefault)&&e.preventDefault(),setTimeout(()=>{const e=v();console.log(1111,e);const t=Object.assign(Object.assign({},g),e);f(t),u(Object.assign(Object.assign({},o[0]||{}),{current:1}),e,{allFormData:t,type:m})})},[v,u,o,g,m]),E=Object(l.useCallback)(()=>{i.resetFields(),j()},[i,j]);return Object.assign(Object.assign({},r),{search:{submit:j,type:m,changeType:O,reset:E},remove:e=>{d(t=>{const a=t.list.slice();return a.forEach((t,n)=>{t.id===e&&a.splice(n,1)}),Object.assign(Object.assign({},t),{list:a})})},add:e=>{d(t=>{const a=t.list.slice();return a.push(e),Object.assign(Object.assign({},t),{list:a})})},update:(e,t)=>{d(a=>{const n=a.list.slice();return n.forEach((a,s)=>{a.id===e&&(n[s]=Object.assign(Object.assign({},a),t))}),Object.assign(Object.assign({},a),{list:n})})},dataSource:(null===(a=r.data)||void 0===a?void 0:a.list)||[]})}},206:function(e,t,a){"use strict";var n=a(1),s=a.n(n),l=a(21),i=a.n(l);a(207);const c=({visible:e,content:t,space:a,children:n})=>s.a.createElement("div",{className:i()({toolsBar_space:a},"toolsBar")},s.a.createElement("div",{className:"flex flex_between"},n),s.a.createElement("div",{style:{display:e?"block":"none"},className:"toolsBar-content"},t));c.defaultProps={visible:!1,space:!1},t.a=c},207:function(e,t,a){var n=a(14),s=a(202);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var l={insert:"head",singleton:!1},i=n(s,l);if(!s.locals||e.hot.invalidate){var c=s.locals;e.hot.accept(202,(function(){"string"==typeof(s=(s=a(202)).__esModule?s.default:s)&&(s=[[e.i,s,""]]),function(e,t){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(c,s.locals)?(c=s.locals,i(s)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),e.exports=s.locals||{}},209:function(e,t,a){e.exports=a(6)(408)},211:function(e,t,a){e.exports=a(6)(75)},73:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a(1),l=a.n(s),i=a(4),c=a(8);const r={labelCol:{span:4},wrapperCol:{span:20}};t.default=e=>{var{data:t}=e,a=Object(n.b)(e,["data"]);const[o]=i.Form.useForm();Object(s.useEffect)(()=>{a.visible&&setTimeout(()=>{t?o.setFieldsValue(Object.assign({},t)):(o.resetFields(),o.setFieldsValue({status:1,sort:1}))})},[a.visible]);return l.a.createElement(i.Modal,{title:"设置",maskClosable:!1,visible:a.visible,onCancel:()=>a.setVisible(),onOk:e=>{e.preventDefault(),o.validateFields().then(e=>Object(n.a)(void 0,void 0,void 0,(function*(){var n;const s=Object.assign(Object.assign({},t),e);(null==t?void 0:t.id)&&(yield c.Zb(t.id,Object.assign(Object.assign({},e),{postage:100*e.postage}))),a.setVisible(),null===(n=a.onOk)||void 0===n||n.call(a,(null==t?void 0:t.id)?"update":"create",s)})))}},l.a.createElement(i.Form,Object.assign({form:o},r),l.a.createElement(i.Form.Item,{label:"门店名字",name:"status"},null==t?void 0:t.name),l.a.createElement(i.Form.Item,{label:"佣金比率",name:"shop_cut",extra:"例如：设置佣金比率为；100元商品价格，设置比率10%：商家得90元， 你得10元"},l.a.createElement(i.InputNumber,{min:0,max:20,formatter:e=>`${e}%`,parser:e=>e.replace("%","")})),l.a.createElement(i.Form.Item,{label:"跑腿费",name:"postage"},l.a.createElement(i.InputNumber,{min:0,max:100,formatter:e=>`￥${e}`,parser:e=>e.replace("￥","")}))))}},74:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a(1),l=a.n(s),i=a(4);t.default=e=>{var{data:t}=e,a=Object(n.b)(e,["data"]);const[c,r]=Object(s.useState)("");return Object(s.useEffect)(()=>{a.visible&&r("23")},[a.visible]),l.a.createElement(i.Modal,{title:"小程序二维码",maskClosable:!1,visible:a.visible,onCancel:()=>a.setVisible(),onOk:()=>a.setVisible()},l.a.createElement("div",null,l.a.createElement("img",{src:c})))}}}]);