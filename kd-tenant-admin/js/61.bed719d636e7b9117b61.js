(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{212:function(e,a,t){e.exports=t(6)(2717)},213:function(e,a,t){e.exports=t(6)(408)},214:function(e,a,t){e.exports=t(6)(75)},215:function(e,a,t){"use strict";var l=t(1),n=t.n(l),s=t(4),o=t(212),i=t(8);function r(e){const a="image/jpeg"===e.type||"image/png"===e.type;a||s.message.error("You can only upload JPG/PNG file!");const t=e.size/1024/1024<.5;return t||s.message.error("Image must smaller than 500Kb!"),a&&t}a.a=e=>{const[a,t]=Object(l.useState)(!1),[c,u]=Object(l.useState)(""),[d,m]=Object(l.useState)("");Object(l.useEffect)(()=>{Object(i.pb)().then(e=>{m(e.data)})},[]),Object(l.useEffect)(()=>{u(e.value?e.value:"")},[e.value]);const b=n.a.createElement("div",null,a?n.a.createElement(o.LoadingOutlined,null):n.a.createElement(o.PlusOutlined,null),n.a.createElement("div",{className:"ant-upload-text"},"Upload"));return n.a.createElement(s.Upload,{name:"file",data:()=>({token:d}),listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"https://up-z2.qiniup.com",beforeUpload:r,onChange:a=>{var l;if("uploading"!==a.file.status){if("done"===a.file.status){console.log(a.fileList[0].response.data);const n="http://static.kuaidaxy.com/"+a.fileList.pop().response.key;null===(l=e.onChange)||void 0===l||l.call(e,n.replace("https://","")),function(e,a){const t=new FileReader;t.addEventListener("load",()=>a(t.result)),t.readAsDataURL(e)}(a.file.originFileObj,e=>{t(!1),u(e)})}}else t(!0)}},c?n.a.createElement("img",{src:c,alt:"avatar",style:{width:"100%"}}):b)}},58:function(e,a,t){"use strict";t.r(a);var l=t(5),n=t(1),s=t.n(n),o=t(4),i=t(8),r=t(211),c=t(215);const u={labelCol:{span:4},wrapperCol:{span:20}},d=e=>{var a,{data:t}=e,d=Object(l.b)(e,["data"]);const[m]=o.Form.useForm(),b=Object(r.b)(()=>i.P("business",{cache:1}));Object(n.useEffect)(()=>{d.visible&&setTimeout(()=>{t?m.setFieldsValue(Object.assign({},t)):(m.resetFields(),m.setFieldsValue({status:1,sort:1}))})},[d.visible]);const p=Object(n.useCallback)(e=>{var a;const t=null===(a=b.data)||void 0===a?void 0:a.data.find(a=>a.label===e);t&&m.setFieldsValue({logo:t.logo,code:t.value,name:t.label})},[b]);return s.a.createElement(o.Modal,{title:(null==t?void 0:t.id)?"编辑":"添加",maskClosable:!1,visible:d.visible,onCancel:()=>d.setVisible(),onOk:e=>{e.preventDefault(),m.validateFields().then(e=>Object(l.a)(void 0,void 0,void 0,(function*(){var a;const l=Object.assign(Object.assign({},t),e);(null==t?void 0:t.id)?yield i.Tb(t.id,e):yield i.d(e),d.setVisible(),null===(a=d.onOk)||void 0===a||a.call(d,(null==t?void 0:t.id)?"update":"create",l)})))}},s.a.createElement(o.Form,Object.assign({form:m},u),s.a.createElement(o.Form.Item,{label:"服务",name:"code",rules:[{required:!0}]},s.a.createElement(o.Select,{onChange:p},null===(a=b.data)||void 0===a?void 0:a.data.map(e=>{var a;return s.a.createElement(o.Select.Option,{key:e.value,value:e.value,disabled:null===(a=d.disabled)||void 0===a?void 0:a.includes(e.value)},e.label)}))),s.a.createElement(o.Form.Item,{label:"服务名称",name:"name",rules:[{required:!0,message:"请填写服务名称"}]},s.a.createElement(o.Input,null)),s.a.createElement(o.Form.Item,{label:"服务名",name:"code"},s.a.createElement(o.Input,{disabled:!0})),s.a.createElement(o.Form.Item,{label:"图片地址",name:"logo",getValueFromEvent:e=>e,rules:[{required:!0}],extra:"建议尺寸100 * 100"},s.a.createElement(c.a,null)),s.a.createElement(o.Form.Item,{label:"状态",name:"status"},s.a.createElement(o.Radio.Group,null,s.a.createElement(o.Radio,{value:1},"启用"),s.a.createElement(o.Radio,{value:0},"禁用"))),s.a.createElement(o.Form.Item,{label:"排序",name:"sort"},s.a.createElement(o.InputNumber,null))))};d.defaultProps={disabled:[]},a.default=d}}]);