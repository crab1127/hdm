(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{102:function(e,a,t){"use strict";t.r(a);var l=t(5),n=t(1),i=t.n(n),o=t(4),r=t(8);const c=e=>{var{level:a}=e,t=Object(l.b)(e,["level"]);const[c,m]=Object(n.useState)([]);Object(n.useEffect)(()=>{Object(l.a)(void 0,void 0,void 0,(function*(){var e,l,n,i;const o=yield r.A({pid:1e5}).then(e=>e.data.map(e=>({value:e.id,label:e.name,isLeaf:1===a})));let c=[];if(null===(e=t.defaultValue)||void 0===e?void 0:e[0]){const e=yield r.A({pid:null===(l=t.defaultValue)||void 0===l?void 0:l[0]}).then(e=>e.data.map(e=>({value:e.id,label:e.name,isLeaf:1===a})));o.forEach(a=>{var l;a.value===(null===(l=t.defaultValue)||void 0===l?void 0:l[0])&&(a.children=e,c=a.children)})}if(null===(n=t.defaultValue)||void 0===n?void 0:n[1]){const e=yield r.A({pid:null===(i=t.defaultValue)||void 0===i?void 0:i[1]}).then(e=>e.data.map(e=>({value:e.id,label:e.name,isLeaf:1===a})));c.forEach(a=>{var l;a.value===(null===(l=t.defaultValue)||void 0===l?void 0:l[1])&&(a.children=e)})}m(o)}))},[]);return i.a.createElement(o.Cascader,Object.assign({},t,{options:c,loadData:e=>{const t=e[e.length-1];t.loading=!0,console.log(e,t),r.A({pid:t.value}).then(e=>{t.loading=!1,t.children=e.data.map(e=>({value:e.id,label:e.name,isLeaf:a===e.level})),m(e=>e.slice())})}}))};c.defaultProps={level:3};var m=c,d=t(9),u=t(211),s=t(7),v=t(206),p=t.n(v);a.default=()=>{const[e,a]=Object(n.useState)(),{tenant:t}=s.a.useContainer(),{data:c,loading:v}=Object(u.b)(r.L);console.log("setting",null==c?void 0:c.data);return i.a.createElement("div",{className:"content"},!v&&i.a.createElement(o.Form,Object.assign({},d.c,{initialValues:(null==c?void 0:c.data)||{horseman_cut:0,shop_cut:0},onFinish:a=>Object(l.a)(void 0,void 0,void 0,(function*(){e&&r.Qb({province_id:e[0],city_id:e[1]});try{(null==c?void 0:c.data)?yield r.Zb(a):yield r.h(a),o.message.info("更新成功")}catch(e){o.message.error("更新失败")}}))}),i.a.createElement(o.Form.Item,{label:"学校"},i.a.createElement("div",null,null==t?void 0:t.name)),i.a.createElement(o.Form.Item,{label:"有效期",name:"is_open_recruit"},i.a.createElement("div",null,p()(null==t?void 0:t.start_time).format("YYYY-MM-DD HH:mm"),"~",p()(null==t?void 0:t.end_time).format("YYYY-MM-DD HH:mm"))),i.a.createElement(o.Form.Item,{label:"地址"},i.a.createElement(m,{level:2,defaultValue:[(null==t?void 0:t.province_id)||0,(null==t?void 0:t.city_id)||0],onChange:e=>{a(e)}})),i.a.createElement(o.Form.Item,{label:"是否开启骑手招聘",name:"is_open_recruit"},i.a.createElement(o.Radio.Group,null,i.a.createElement(o.Radio,{value:1},"启用"),i.a.createElement(o.Radio,{value:0},"关闭"))),i.a.createElement(o.Form.Item,{label:"招聘说明",name:"recruit_content"},i.a.createElement(o.Input.TextArea,{rows:4})),i.a.createElement(o.Form.Item,{label:"骑手佣金比率",name:"horseman_cut",extra:"例如：设置佣金比率为；80%就是指100的话：骑手得80，站长得20"},i.a.createElement(o.InputNumber,{min:20,max:100,formatter:e=>`${e}%`,parser:e=>e.replace("%","")})),i.a.createElement(o.Form.Item,{label:"跑腿费",name:"reward"},i.a.createElement(o.InputNumber,{min:0,max:100,formatter:e=>`￥${e}`,parser:e=>e.replace("￥","")})),i.a.createElement(o.Form.Item,{label:"."},i.a.createElement(o.Space,null,i.a.createElement(o.Button,{type:"primary",htmlType:"submit"},"保存"),i.a.createElement(o.Button,{type:"primary",onClick:()=>{r.Ub().then(()=>{o.message.info("更新成功")}).catch(()=>{o.message.error("更新失败")})}},"更新学校缓存")))))}},206:function(e,a,t){e.exports=t(6)(3e3)},213:function(e,a,t){e.exports=t(6)(408)},214:function(e,a,t){e.exports=t(6)(75)}}]);